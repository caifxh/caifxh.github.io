<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    fxh
</title>
<link rel="shortcut icon" href="https://caifxh.github.io/favicon.ico?v=1586405129501">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://caifxh.github.io/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://caifxh.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://caifxh.github.io">
                <img class="avatar" src="https://caifxh.github.io/images/avatar.png?v=1586405129501" alt="">
            </a>
            <div class="site-title">
                <h1>
                    fxh
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-container main-container">
                <div id="content" class="main-container-left">
                    
        
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://caifxh.github.io/post/si-bian-xing-bu-deng-shi/">
                        å››è¾¹å½¢ä¸ç­‰å¼
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-04-09</time>
                    
                        <a href="https://caifxh.github.io/tag/hLQFdtGuD/" class="post-tag i-tag
                            i-tag-primary">
            #DP
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            å››è¾¹å½¢ä¸ç­‰å¼ä¼˜åŒ–ä¸»è¦é’ˆå¯¹åŒºé—´DPæ¨¡å‹ã€‚
è½¬ç§»æ–¹ç¨‹å½¢å¦‚ï¼š
f[i][j] = min(f[i][k] + f[k + 1][j] + w(i, j))
å¯¹äºæ¯ä¸ªåŒºé—´éƒ½è¦æšä¸¾ k
æ—¶é—´å¤æ‚åº¦ O(n3n^3n3)
çŠ¶æ€æ•°å·²ç»å®šå¥½äº†æ˜¯ O(n2n^2n2)ï¼Œæˆ‘ä»¬èƒ½æƒ³åŠæ³•ä¼˜åŒ–çš„éƒ¨åˆ†å°±æ˜¯æŠŠ O(n) çš„è½¬ç§»ä¼˜åŒ–åˆ° O(1)
è¿™é‡Œå°±è¦ç”¨åˆ°å››è¾¹å½¢ä¸ç­‰å¼ä¼˜åŒ–ã€‚
å¯¹äº a &amp;lt; b &amp;lt; c &amp;lt; dï¼š
å¦‚æœæœ‰ f(a, c) + f(b, d) &amp;lt;= f(b, c) + f(a, d) äº¤å‰ &amp;lt;= åŒ…å«
æˆ‘ä»¬å°±ç§° f æ»¡è¶³å››è¾¹å½¢ä¸ç­‰å¼ã€‚
å¦‚æœä»£ä»·å‡½æ•° w(i,j) æ»¡è¶³å•è°ƒæ€§å’Œå››è¾¹å½¢ä¸ç­‰å¼ï¼Œé‚£ä¹ˆ dp å‡½æ•° f(i,j) ä¹Ÿæ»¡è¶³å››è¾¹å½¢ä¸ç­‰å¼ã€‚
å®šä¹‰ s(i,j) ä¸º f(i,j) å–å¾—æœ€ä¼˜å€¼å¯¹åº”çš„è½¬ç§»ï¼ˆå³ kï¼‰
å¦‚æœ f(i,j) æ»¡è¶³å››è¾¹å½¢ä¸ç­‰å¼ï¼Œé‚£ä¹ˆ s(i,j) å•è°ƒ
å³s(i,j)â‰¤s(i,j+1)â‰¤s(i+1,j+1)
åº”ç”¨èƒŒæ™¯



å››è¾¹å½¢ä¸ç­‰å¼å®šä¹‰å’Œå•è°ƒæ€§å®šä¹‰



#include&amp;lt;iostream&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace std;
const int N=310,INF=0x3f3f3f3f;
int f[N][N];
int sum[N];
int s[N][N];
int n;

int main()
{
    cin&amp;gt;&amp;gt;n;

    for(int i=1;i&amp;lt;=n;i++)
    {
        cin&amp;gt;&amp;gt;sum[i];
        sum[i]+=sum[i-1];
        s[i][i]=i;
    }

    for(int len=2;len&amp;lt;=n;len++)
    {
        for(int i=1;i+len-1&amp;lt;=n;i++)
        {
            int j=i+len-1;
            f[i][j]=INF;
            for(int k=s[i][j-1];k&amp;lt;=s[i+1][j];k++)
                if(f[i][j] &amp;gt; f[i][k]+f[k+1][j]+sum[j]-sum[i-1])
                {
                    f[i][j] = f[i][k]+f[k+1][j]+sum[j]-sum[i-1];
                    s[i][j]=k;
                }
        }
    }

    cout&amp;lt;&amp;lt;f[1][n]&amp;lt;&amp;lt;endl;

    return 0;
}


acwing1068

#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
const int N=210,INF=0x3f3f3f3f;
int f[N][N];
int g[N][N];
int w[N];
int sum[N];
int s[N][N];
int n;

int main()
{
    cin&amp;gt;&amp;gt;n;
    
    for(int i=1;i&amp;lt;=n;i++)
    {
        cin&amp;gt;&amp;gt;w[i];
        w[n+i]=w[i];
    }
    
    for(int i=1;i&amp;lt;=n*2;i++)
    {
        sum[i]=sum[i-1]+w[i];
        s[i][i]=i;
    }
    
    for(int len=2;len&amp;lt;=n*2;len++)
    {
        for(int i=1;i+len-1&amp;lt;=n*2;i++)
        {
            int j=i+len-1;
            f[i][j]=INF;
            for(int k=s[i][j-1];k&amp;lt;=s[i+1][j];k++)
                if(f[i][j] &amp;gt; f[i][k]+f[k+1][j]+sum[j]-sum[i-1])
                {
                    f[i][j] = f[i][k]+f[k+1][j]+sum[j]-sum[i-1];
                    s[i][j]=k;
                }
                
            g[i][j]=max(g[i+1][j],g[i][j-1])+sum[j]-sum[i-1];
        }
    }
    
    int maxv=0;
    int minv=INF;
    for(int i=1;i&amp;lt;=n;i++)
    {
        maxv=max(maxv,g[i][n+i-1]);
        minv=min(minv,f[i][n+i-1]);
    }
    
    cout&amp;lt;&amp;lt;minv&amp;lt;&amp;lt;endl&amp;lt;&amp;lt;maxv&amp;lt;&amp;lt;endl;
    
    return 0;
}

å››è¾¹å½¢ä¸ç­‰å¼å®šç†

ä¸€ç»´çº¿æ€§DPçš„å››è¾¹å½¢ä¸ç­‰å¼ä¼˜åŒ–

æ¯”èµ›æ—¶ï¼Œæˆ‘ä»¬åªè¦å…ˆå†™å‡ºæš´åŠ›çš„ DP ç„¶åæ‰“å‡º costã€dpã€å’Œå†³ç­–æ•°ç»„ï¼ŒéªŒè¯ costã€dpå‡½æ•°æ˜¯å¦æ»¡è¶³å››è¾¹å½¢ä¸ç­‰å¼ï¼Œ
ä»¥åŠå†³ç­–æ˜¯å¦å…·æœ‰å•è°ƒæ€§ã€‚

æ‹¿åˆ°é¢˜ç›®åï¼Œå…ˆåˆ¤æ–­wæ˜¯å¦å•è°ƒã€æ˜¯å¦æ»¡è¶³å››è¾¹å½¢ä¸ç­‰å¼ï¼Œå†ä½¿ç”¨å››è¾¹å½¢ä¸ç­‰å¼ä¼˜åŒ–DPã€‚

æœ€ä¼˜äºŒå‰æœç´¢æ ‘



é¢˜ç›®ç»™å‡ºçš„æ•°åˆ—(val)æ˜¯æœ‰åºçš„ï¼Œå‡è®¾æˆ‘ä»¬ä»¥iä¸ºæ ¹ï¼Œ1i-1å°±æ˜¯å·¦å­æ ‘ï¼Œi+1nå°±æ˜¯å³å­æ ‘
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
const int N=260;
int w[N];
int sum[N];
int s[N][N];
int f[N][N];
int n;

int main()
{
	while(~scanf(&amp;quot;%d&amp;quot;,&amp;amp;n))
	{
		for(int i=1;i&amp;lt;=n;i++)
		{
			cin&amp;gt;&amp;gt;w[i];
			sum[i]=sum[i-1]+w[i];
			s[i][i]=i;
		}
		
		for(int len=1;len&amp;lt;=n;len++)
		{
			for(int i=1;i+len-1&amp;lt;=n;i++)
			{
				int j=i+len-1;
				f[i][j]=1e9;
				if(len == 1) f[i][j]=0;
				
				for(int k=s[i][j-1];k&amp;lt;=s[i+1][j];k++)
					if(f[i][j] &amp;gt; f[i][k-1]+f[k+1][j]+sum[j]-sum[i-1]-w[k])
					{
						f[i][j] = f[i][k-1]+f[k+1][j]+sum[j]-sum[i-1]-w[k];
						s[i][j]=k;
					}
			}
		}
		
		cout&amp;lt;&amp;lt;f[1][n]&amp;lt;&amp;lt;endl;
	}
	return 0;
}

hdu2829
æœ‰ n ä¸ªç«è½¦ç«™ï¼Œç¬¬ i ä¸ªç«è½¦ç«™æœ‰ä¸€ä¸ªé‡è¦åº¦ a[i]ã€‚
ä½ ç°åœ¨å¯ä»¥ç‚¸æ‰ m æ¡é“è½¨ã€‚è¿™æ ·é“è½¨å°±æ–­æˆäº† m + 1 æ®µï¼Œæ¯ä¸€æ®µéƒ½æœ‰ä¸€ä¸ªæˆ˜ç•¥å€¼ï¼Œå®ƒç­‰äºè¿™ä¸€æ®µé“è½¨ä¸Šçš„ç«è½¦ç«™ä¸¤ä¸¤çš„é‡è¦åº¦ä¹˜ç§¯ä¹‹å’Œã€‚è¯·ä½ æœ€å°åŒ–æ€»çš„æˆ˜ç•¥å€¼ä¹‹å’Œã€‚
0 â‰¤ m &amp;lt; n â‰¤ 1000
æ–œç‡ä¼˜åŒ–ï¼š

é‚£ä¹ˆï¼Œå°±æœ‰ï¼šdp[i][j] = min( dp[k][j-1] + w[k+1][i] )ï¼Œjâ‰¤k&amp;lt;iï¼›
æ–¹ç¨‹çš„æ„ä¹‰æ˜¯ï¼šç‚¸æ¯ä»“åº“kå’Œä»“åº“k+1ä¹‹é—´çš„é‚£æ®µé“è·¯ï¼ˆå³ç¬¬kæ®µé“è·¯ï¼‰ï¼Œç®—å‡ºæ€»ä»·å€¼ï¼Œæšä¸¾kæ‰¾åˆ°æœ€å°çš„ã€‚
é‚£ä¹ˆå¦‚ä½•è®¡ç®—w[k+1][i]å‘¢ï¼Ÿå‡è®¾sum[i]=âˆ‘k=1iv[k]\sum_{k=1}^{i}v[k]âˆ‘k=1iâ€‹v[k] ï¼Œé‚£ä¹ˆå°±æœ‰ï¼šw[1][i] = w[1][k] + w[k+1][i] + (v[1]+v[2]+â€¦+v[k]) Ã— (v[k+1]+v[k+2]+â€¦+v[i])= w[1][k] + w[k+1][i] + sum[k] Ã— (sum[i]-sum[k])
å³w[k+1][i] = w[1][i] - w[1][k] - sum[k] Ã— (sum[i]-sum[k])
æˆ‘ä»¬æŠŠw[k+1][i]çš„è®¡ç®—å¼å¸¦å…¥çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¾—åˆ°ï¼š
dp[i][j] = min{ dp[k][j-1] + w[1][i] - w[1][k] - sum[k] Ã— (sum[i]-sum[k]) }
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
typedef long long LL;
const int N=1010;
int f[N][N];
int s[N],w[N];
int q[N];
int n,m;

int getY(int i,int j,int k)
{
	return f[i-1][j]-w[j]+s[j]*s[j]-f[i-1][k]+w[k]-s[k]*s[k];
}

int getX(int i,int j)
{
	return s[i]-s[j];
}

int main()
{
	while(~scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;n,&amp;amp;m))
	{
		if(!n &amp;amp;&amp;amp; !m) break;
		
		for(int i=1;i&amp;lt;=n;i++)
		{
			int x;
			scanf(&amp;quot;%d&amp;quot;,&amp;amp;x);
			s[i]=s[i-1]+x;
			w[i]=w[i-1]+s[i-1]*x;
			f[0][i]=w[i];
		}
		
		for(int i=1;i&amp;lt;=m;i++)
		{
			int hh=0,tt=-1;
			q[++tt]=0;
			for(int j=1;j&amp;lt;=n;j++)
			{
				while(hh &amp;lt; tt &amp;amp;&amp;amp; getY(i,q[hh+1],q[hh]) &amp;lt;= s[j]*getX(q[hh+1],q[hh]))
					hh++;
				int k=q[hh];
				f[i][j]=f[i-1][k]+w[j]-w[k]-s[k]*(s[j]-s[k]);
				
				while(hh &amp;lt; tt &amp;amp;&amp;amp; getY(i,q[tt],q[tt-1])*getX(j,q[tt]) &amp;gt;= getY(i,j,q[tt])*getX(q[tt],q[tt-1]))
					tt--;
				q[++tt]=j;
			}			
		}
		
		printf(&amp;quot;%d\n&amp;quot;,f[m][n]);
	}
	return 0;
}

å››è¾¹å½¢ä¸ç­‰å¼ï¼š
ç”¨ f[i][j] æ¥è¡¨ç¤ºåœ¨å‰ j ä¸ªç«è½¦ç«™ä¸­ç”¨äº† i ä¸ªç‚¸å¼¹å¾—åˆ°çš„æœ€å°çš„æˆ˜ç•¥å€¼æ€»å’Œã€‚
æšä¸¾ä¸Šä¸€æ¬¡ä½¿ç”¨ç‚¸å¼¹çš„ä½ç½® kï¼Œå¾—åˆ°
f[i][j] = min(f[i - 1][k] + w[k + 1][j])(i-1 &amp;lt; k &amp;lt; j)
w[i][j] = [i, j] ä¸­ä¸¤ä¸¤ä¹˜ç§¯ä¹‹å’Œ= [(a[i] + a[i + 1] + â€¦ + a[j])2 - (a[i]2 + a[i + 1]2 + â€¦ + a[j]2)] / 2
å¯ä»¥éªŒè¯å®ƒæ˜¯æ»¡è¶³å•è°ƒæ€§å’Œå››è¾¹å½¢ä¸ç­‰å¼çš„ã€‚
å› æ­¤è¿™é¢˜å¯ä»¥ç”¨å››è¾¹å½¢ä¸ç­‰å¼æ¥ä¼˜åŒ–ã€‚
f[i][j] = min(f[i - 1][k] + w[k + 1][j])
(s[i-1][j] &amp;lt; k &amp;lt; s[i+1][j])
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
typedef long long LL;
const int N=1010;
int f[N][N];
int a[N];
int w[N][N];
int p[N][N];
int n,m;

int main()
{
	while(~scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;n,&amp;amp;m))
	{
		if(!n &amp;amp;&amp;amp; !m) break;
		
		for(int i=1;i&amp;lt;=n;i++) scanf(&amp;quot;%d&amp;quot;,&amp;amp;a[i]);
		
		for(int i=1;i&amp;lt;=n;i++)
		{
			int sum=0;
			w[i][i]=0;
			for(int j=i+1;j&amp;lt;=n;j++)
			{
				sum+=a[j-1];
				w[i][j]=w[i][j-1]+sum*a[j];
			}
		}
		
		//      æ‰“è¡¨
// 		for(int i=1;i&amp;lt;=n;i++) 
// 		{
// 		    for(int j=1;j&amp;lt;=n;j++)
// 		        cout&amp;lt;&amp;lt;w[i][j]&amp;lt;&amp;lt;&#39; &#39;;
// 		    cout&amp;lt;&amp;lt;endl;
// 		}
		
		for(int i=0;i&amp;lt;=n;i++)
		{
			f[0][i]=w[1][i];
			p[0][i]=0;
			p[i][n+1]=n;
		}
	
		
		for(int i=1;i&amp;lt;=m;i++)
			for(int j=n;j&amp;gt;=1;j--)
			{
				f[i][j]=1e9;
				for(int k=p[i-1][j];k&amp;lt;=p[i][j+1];k++)
					if(f[i][j] &amp;gt; f[i-1][k] + w[k+1][j])
					{
						f[i][j] = f[i-1][k] + w[k+1][j];
						p[i][j]=k;
					}
			}
		
		printf(&amp;quot;%d\n&amp;quot;,f[m][n]);
	}
	return 0;
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://caifxh.github.io/post/si-bian-xing-bu-deng-shi/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://caifxh.github.io/post/xie-lu-you-hua/">
                        æ–œç‡ä¼˜åŒ–
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-04-08</time>
                    
                        <a href="https://caifxh.github.io/tag/hLQFdtGuD/" class="post-tag i-tag
                            i-tag-error">
            #DP
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            

hdu3507











#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace std;
const int N=500010;
int f[N];
int s[N];
int q[N];
int n,m;

int getY(int i,int j)
{
	return f[i]+s[i]*s[i]-f[j]-s[j]*s[j];
}

int getX(int i,int j)
{
	return s[i]-s[j];
}

int main()
{
	while(~scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;n,&amp;amp;m))
	{
		for(int i=1;i&amp;lt;=n;i++)
		{
			scanf(&amp;quot;%d&amp;quot;,&amp;amp;s[i]);
			s[i]+=s[i-1];
		}
		
		int hh=0,tt=-1;
		q[++tt]=0;
		
		for(int i=1;i&amp;lt;=n;i++)
		{
			while(hh&amp;lt;tt &amp;amp;&amp;amp; getY(q[hh+1],q[hh]) &amp;lt;= 2*s[i]*getX(q[hh+1],q[hh]))
				hh++;
			int j=q[hh];
			f[i]=f[j]+(s[i]-s[j])*(s[i]-s[j])+m;
			while(hh&amp;lt;tt &amp;amp;&amp;amp; getY(q[tt],q[tt-1])*getX(i,q[tt]) &amp;gt;= getY(i,q[tt])*getX(q[tt],q[tt-1]))
				tt--;
			q[++tt]=i;
		}
		
		printf(&amp;quot;%d\n&amp;quot;,f[n]);
	}
	return 0;
}


acwing302
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace std;
typedef long long LL;
const int N=300010;
LL st[N],sc[N];
LL f[N];
int q[N];
int n,s;

LL getY(int i,int j)
{
    return f[i]-f[j];
}

LL getX(int i,int j)
{
    return sc[i]-sc[j];
}

int main()
{
    cin&amp;gt;&amp;gt;n&amp;gt;&amp;gt;s;
    
    for(int i=1;i&amp;lt;=n;i++)
    {
        scanf(&amp;quot;%lld%lld&amp;quot;,&amp;amp;st[i],&amp;amp;sc[i]);
        st[i]+=st[i-1];
        sc[i]+=sc[i-1];
    }
    
    int hh=0,tt=-1;
    q[++tt]=0;
    for(int i=1;i&amp;lt;=n;i++)
    {
        int l=hh,r=tt;
        while(l&amp;lt;r)
        {
            int mid=l+r&amp;gt;&amp;gt;1;
            if(getY(q[mid+1],q[mid]) &amp;gt;= (s+st[i])*getX(q[mid+1],q[mid])) r=mid;
            else l=mid+1;
        }
        
        int j=q[l];
        f[i]=f[j]-(s+st[i])*sc[j]+s*sc[n]+st[i]*sc[i];
        while(hh&amp;lt;tt &amp;amp;&amp;amp; getY(q[tt],q[tt-1])*getX(i,q[tt]) &amp;gt;= getY(i,q[tt])*getX(q[tt],q[tt-1]))
            tt--;
        q[++tt]=i;
    }
    
    cout&amp;lt;&amp;lt;f[n]&amp;lt;&amp;lt;endl;
    
    return 0;
}

acwing303

#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
typedef long long LL;
const int N=100010,M=100010,P=110;
LL f[P][M];
LL d[N];
int t[M],a[M];
LL s[M];
int q[M];
int n,m,p;

LL getY(int i,int j,int k)
{
    return f[i-1][j]+s[j]-f[i-1][k]-s[k];
}

int getX(int i,int j)
{
    return i-j;
}

int main()
{
    cin&amp;gt;&amp;gt;n&amp;gt;&amp;gt;m&amp;gt;&amp;gt;p;
    
    for(int i=2;i&amp;lt;=n;i++)
        cin&amp;gt;&amp;gt;d[i],d[i]+=d[i-1];
        
    for(int i=1;i&amp;lt;=m;i++)
    {
        int h;
        cin&amp;gt;&amp;gt;h&amp;gt;&amp;gt;t[i];
        a[i]=t[i]-d[h];
    }
    
    sort(a+1,a+m+1);
    
    
    for(int i=1;i&amp;lt;=m;i++) s[i]=s[i-1]+a[i];
    
    memset(f,0x3f,sizeof f);
    for(int i=0;i&amp;lt;=p;i++) f[i][0]=0;
    
    for(int i=1;i&amp;lt;=p;i++)
    {
        
        int hh=0,tt=-1;
        q[++tt]=0;
        
        for(int j=1;j&amp;lt;=m;j++)
        {
            while(hh &amp;lt; tt &amp;amp;&amp;amp; getY(i,q[hh+1],q[hh]) &amp;lt;= (LL)a[j]*getX(q[hh+1],q[hh]))
                hh++;
            int k=q[hh];
            f[i][j]=f[i-1][k]+(LL)a[j]*(j-k)-(s[j]-s[k]);
            while(hh &amp;lt; tt &amp;amp;&amp;amp; getY(i,q[tt],q[tt-1])*getX(j,q[tt]) &amp;gt;= getY(i,j,q[tt])*getX(q[tt],q[tt-1]))
                tt--;
            q[++tt]=j;
        }
    }

    cout&amp;lt;&amp;lt;f[p][m]&amp;lt;&amp;lt;endl;
    
    return 0;
}

P2120



#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
typedef long long LL;
const int N=1000010;
LL f[N];
LL x[N],c[N],p[N];
LL sp[N],sxp[N];
int q[N];
int n;

LL getY(int i,int j)
{
	return f[i]+sxp[i]-f[j]-sxp[j];
}

LL getX(int i,int j)
{
	return sp[i]-sp[j];
}

int main()
{
	cin&amp;gt;&amp;gt;n;
	
	for(int i=1;i&amp;lt;=n;i++)
	{
		scanf(&amp;quot;%lld%lld%lld&amp;quot;,&amp;amp;x[i],&amp;amp;p[i],&amp;amp;c[i]);
		sp[i]=sp[i-1]+p[i];
		sxp[i]=sxp[i-1]+x[i]*p[i];
	}
	
	int hh=0,tt=-1;
	q[++tt]=0;
	
	for(int i=1;i&amp;lt;=n;i++)
	{
		while(hh &amp;lt; tt &amp;amp;&amp;amp; getY(q[hh+1],q[hh]) &amp;lt;= x[i]*getX(q[hh+1],q[hh]))
			hh++;
		int j=q[hh];
		f[i]=f[j]+x[i]*(sp[i]-sp[j])-(sxp[i]-sxp[j])+c[i];
		while(hh &amp;lt; tt &amp;amp;&amp;amp; getY(q[tt],q[tt-1])*getX(i,q[tt]) &amp;gt;= getY(i,q[tt])*getX(q[tt],q[tt-1]))
			tt--;
		q[++tt]=i;
	}
	
	printf(&amp;quot;%lld\n&amp;quot;,f[n]);
	
	return 0;
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://caifxh.github.io/post/xie-lu-you-hua/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://caifxh.github.io/post/qian-zhui-he-chai-fen/">
                        å‰ç¼€å’Œ å·®åˆ†
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-04-08</time>
                    
                        <a href="https://caifxh.github.io/tag/TZ7cITYtt/" class="post-tag i-tag
                            i-tag-other_2">
            #å…¶ä»–ç®—æ³•
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            å‰ç¼€å’Œ
ç»™å®šä¸€ä¸ªåºåˆ—a[1âˆ’n]a[1-n]a[1âˆ’n]ã€‚
æœ‰å¾ˆå¤šæ¬¡è¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®å½¢å¦‚:l r  è¯¢é—®a[l,r]a[l,r]a[l,r]çš„åŒºé—´å’Œã€‚
æ¯æ¬¡è¯¢é—®çš„å¤æ‚åº¦è¦æ±‚ O(1)

é¢„å¤„ç†æ—¶é—´å¤æ‚åº¦O(n)O(n)O(n)
for(int i=1;i&amp;lt;=n;i++)
{
    scanf(&amp;quot;%d&amp;quot;,&amp;amp;a[i]);
    s[i]=s[i-1]+a[i];
}

a[l,r]a[l,r]a[l,r]çš„åŒºé—´å’Œ: s[r]-s[l-1]
æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦O(1)O(1)O(1)
while(m--)
{
    int l,r;
    scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;l,&amp;amp;r);
    printf(&amp;quot;%d\n&amp;quot;,s[r]-s[l-1]);
}

PS:å‰ç¼€å’Œä¸‹æ ‡ä»1å¼€å§‹
åŒºé—´åŠ /å·®åˆ†
ç»™å®šä¸€ä¸ªåºåˆ—a[1âˆ’n]a[1-n]a[1âˆ’n](åˆå€¼å…¨ä¸º0)ã€‚
æœ‰å¾ˆå¤šæ¬¡æ“ä½œï¼Œæ¯ä¸ªæ“ä½œå½¢å¦‚:l r  å°†a[l,r]a[l,r]a[l,r]çš„æ¯ä¸ªå€¼åŠ ä¸Škã€‚
æœ€åè¾“å‡ºæ•´ä¸ªæ•°ç»„ã€‚å¤æ‚åº¦è¦æ±‚O(n)O(n)O(n)

åŒºé—´åŠ [l,r]ï¼Œå®é™…ä¸Šæ˜¯å‘ç”Ÿäº†è¿™ä¸¤ä»¶äº‹ï¼š
a[l]æ¯”å‰ä¸€ä¸ªå…ƒç´ å¤šäº†k;
a[r+1]æ¯”å‰ä¸€ä¸ªå…ƒç´ å°‘äº†k.

æˆ‘ä»¬ç”¨æ•°ç»„bè¡¨ç¤ºåˆšåˆšçš„å·®å€¼ï¼Œb[i]=a[i]-a[i-1].
é‚£ä¹ˆï¼šåŒºé—´åŠ [ğ’,ğ’“]ï¼Œå¯ä»¥åŒ–ä¸ºè¿™ä¸¤ä¸ªæ“ä½œï¼š b[l]+=k; b[r+1]-=k;
void insert(int l,int r,int c)
{
    b[l]+=c;
    b[r+1]-=c;
}

å› æ­¤ï¼Œä¸€æ¬¡åŒºé—´åŠ åªä¿®æ”¹è¿™ä¸¤ä¸ªå…ƒç´ ï¼› æœ€ååˆ©ç”¨bæ•°ç»„æ±‚å‡ºaæ•°ç»„(aæ•°ç»„ä¸ºbæ•°ç»„çš„å‰ç¼€å’Œ)ï¼Œå¯¹bæ•°ç»„æ±‚ä¸€éå‰ç¼€å’Œå³ä¸ºç­”æ¡ˆã€‚
for(int i=1;i&amp;lt;=n;i++)
{
    b[i]+=b[i-1];
    printf(&amp;quot;%d &amp;quot;,b[i]);
}

PS:æ•°ç»„aåˆå€¼ä¸º0ï¼Œè¿›è¡Œnæ¬¡æ’å…¥æ“ä½œå¯å¾—åˆ°æ•°ç»„aã€‚
for(int i=1;i&amp;lt;=n;i++)
    scanf(&amp;quot;%d&amp;quot;,&amp;amp;a[i]);
for(int i=1;i&amp;lt;=n;i++)
    insert(i,i,a[i]);

æ€»ç»“ï¼šå·®åˆ†æ— éœ€æ„é€ ï¼Œå‰ç¼€å’Œéœ€æ„é€ 
é€šè¿‡ä¸Šè¿°çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬èƒ½è½»æ˜“åœ°å¤„ç†è¿™ä¸¤ç±»é—®é¢˜ï¼š

æ•°ç»„å›ºå®šï¼Œç„¶åå¤§é‡è¯¢é—®ï¼›
å¤§é‡åšåŒºé—´åŠ ï¼Œæœ€åè¦ä½ ç»™å‡ºè¿™ä¸ªæ•°ç»„ã€‚

ä¾‹é¢˜
Luogu2879
æœ‰å¥½å‡ å¤´ç‰›ä»ï¼‘åˆ°nçº¿æ€§æ’åˆ—ï¼Œæ¯å¤´ç‰›çš„é«˜åº¦ä¸ºh[i]ç°åœ¨å‘Šè¯‰ä½ è¿™é‡Œé¢çš„ç‰›çš„æœ€å¤§é«˜ åº¦ä¸ºmaxH,è€Œä¸”æœ‰rç»„å…³ç³»ï¼Œæ¯ç»„å…³ç³»è¾“å…¥ä¸¤ä¸ªæ•°å­—ï¼Œå‡è®¾ä¸ºaå’Œb,è¡¨ç¤ºç¬¬aå¤´ç‰›èƒ½çœ‹åˆ°ç¬¬bå¤´ç‰›ï¼Œèƒ½çœ‹åˆ°çš„æ¡ä»¶æ˜¯a, bä¹‹é—´çš„å…¶å®ƒç‰›çš„é«˜åº¦éƒ½ä¸¥æ ¼å°äºmin(h[a], h[b]),è€Œ h[b] &amp;gt;= h[a] æœ€åæ±‚æ‰€æœ‰ç‰›çš„å¯èƒ½æœ€é«˜èº«é«˜è¾“å‡º
æ€è·¯ï¼š
é¦–å…ˆå‡è®¾æ‰€æœ‰ç‰›éƒ½æ˜¯æœ€é«˜èº«é«˜ã€‚ è¯»å…¥çš„çº¦æŸä¿¡æ¯éœ€è¦å»é‡ï¼Œè¿™ä¸ªåˆ©ç”¨æ’åºæˆ–è€…setå¯ä»¥è§£å†³ã€‚ å¯ä»¥å‘ç°å¯¹äºæ¯ä¸ªä½ç½®h[i],å‡è®¾å®ƒè¢«è¦†ç›–äº†xæ¬¡ï¼Œæœ€åç­”æ¡ˆå°±æ˜¯h[i]-x. å¦‚æœå‡ºç°äº†ä¸€å¯¹[l,r]ï¼ŒæŠŠåŒºé—´(l,r)çš„æ•°éƒ½-1å°±å¯ä»¥äº†ã€‚ï¼ˆæ³¨æ„åŒºé—´å¼€é—­ï¼‰
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;set&amp;gt; 
using namespace std;
const int N=10010;
int height[N];
set&amp;lt;pair&amp;lt;int,int&amp;gt; &amp;gt; S;

int main()
{
	int n,i,h,r;
	cin&amp;gt;&amp;gt;n&amp;gt;&amp;gt;i&amp;gt;&amp;gt;h&amp;gt;&amp;gt;r;
	height[1]=h;//å·®åˆ†æ•°ç»„ 
	
	while(r--)
	{
		int a,b;
		cin&amp;gt;&amp;gt;a&amp;gt;&amp;gt;b;
		if(a&amp;gt;b)
			swap(a,b);
		if(!S.count({a,b}))
		{
			S.insert({a,b});
			height[a+1]--;
			height[b]++;
		}
	}
	
	for(int i=1;i&amp;lt;=n;i++)
	{
		height[i]+=height[i-1];
		cout&amp;lt;&amp;lt;height[i]&amp;lt;&amp;lt;endl;
	}
	return 0;
 } 

Luogu3406
è¯¥é“è·¯ç»è¿‡Nä¸ªåŸå¸‚ï¼Œæ¯ä¸ªåŸå¸‚éƒ½æœ‰ä¸€ä¸ªç«™ã€‚ä¸è¿‡ï¼Œç”±äºå„ä¸ªåŸå¸‚ä¹‹é—´ä¸èƒ½åè°ƒå¥½ ï¼Œäºæ˜¯ä¹˜è½¦æ¯ç»è¿‡ä¸¤ä¸ªç›¸é‚»çš„åŸå¸‚ä¹‹é—´ï¼ˆæ–¹å‘ä¸é™ï¼‰ï¼Œå¿…é¡»å•ç‹¬è´­ä¹°è¿™ä¸€å°æ®µçš„è½¦ ç¥¨ã€‚ç¬¬iæ®µé“è·¯è¿æ¥äº†åŸå¸‚iå’ŒåŸå¸‚i+1(1&amp;lt;=i&amp;lt;N)ã€‚å¦‚æœæ­ä¹˜çš„æ¯”è¾ƒè¿œï¼Œéœ€è¦è´­ä¹°å¤šå¼  è½¦ç¥¨ã€‚ç¬¬iæ®µé“è·¯è´­ä¹°çº¸è´¨å•ç¨‹ç¥¨éœ€è¦Aiåšè‰¾å…ƒã€‚ è™½ç„¶ä¸€äº›äº‹æƒ…æ²¡æœ‰åè°ƒå¥½ï¼Œå„æ®µé“è·¯å…¬å¸ä¹Ÿä¸ºäº†æ–¹ä¾¿ä¹˜å®¢ï¼Œæ¨å‡ºäº†ICå¡ã€‚å¯¹äºç¬¬iæ®µ é“è·¯ï¼Œéœ€è¦èŠ±Ciåšè‰¾å…ƒçš„å·¥æœ¬è´¹è´­ä¹°ä¸€å¼ ICå¡ï¼Œç„¶åä¹˜åè¿™æ®µé“è·¯ä¸€æ¬¡å°±åªè¦æ‰£ Bi(Bi&amp;lt;Ai)å…ƒã€‚ICå¡å¯ä»¥æå‰è´­ä¹°ï¼Œæœ‰é’±å°±å¯ä»¥ä»ç½‘ä¸Šä¹°å¾—åˆ°ï¼Œè€Œä¸éœ€è¦äº²è‡ªå»å¯¹åº” çš„åŸå¸‚è´­ä¹°ã€‚å·¥æœ¬è´¹ä¸èƒ½é€€ï¼Œä¹Ÿä¸èƒ½è´­ä¹°è½¦ç¥¨ã€‚æ¯å¼ å¡éƒ½å¯ä»¥å……å€¼ä»»æ„æ•°é¢ã€‚å¯¹äº ç¬¬iæ®µé“è·¯çš„ICå¡ï¼Œæ— æ³•ä¹˜ååˆ«çš„é“è·¯çš„è½¦ã€‚ Uimç°åœ¨éœ€è¦å‡ºå·®ï¼Œè¦å»Mä¸ªåŸå¸‚ï¼Œä»åŸå¸‚P1å‡ºå‘åˆ†åˆ«æŒ‰ç…§P1,P2,P3...PMçš„é¡ºåºè®¿ é—®å„ä¸ªåŸå¸‚ï¼Œå¯èƒ½ä¼šå¤šæ¬¡è®¿é—®ä¸€ä¸ªåŸå¸‚ï¼Œä¸”ç›¸é‚»è®¿é—®çš„åŸå¸‚ä½ç½®ä¸ä¸€å®šç›¸é‚»ï¼Œè€Œä¸” ä¸ä¼šæ˜¯åŒä¸€ä¸ªåŸå¸‚ã€‚ ç°åœ¨ä»–å¸Œæœ›çŸ¥é“ï¼Œå‡ºå·®ç»“æŸåï¼Œè‡³å°‘ä¼šèŠ±æ‰å¤šå°‘çš„é’±ï¼ŒåŒ…æ‹¬è´­ä¹°çº¸è´¨è½¦ç¥¨ã€ä¹°å¡å’Œ å……å€¼çš„æ€»è´¹ç”¨ã€‚
ç›´æ¥æ¨¡æ‹Ÿæ¯æ®µé“è·¯çš„è¦†ç›–å³å¯
 #include&amp;lt;iostream&amp;gt;
using namespace std;
const int N=100010;
 int a[N];
 int b[N];//å·®åˆ†æ•°ç»„ 
 typedef long long LL;
 
 int main()
 {
 	int n,m;
 	cin&amp;gt;&amp;gt;n&amp;gt;&amp;gt;m;
 	for(int i=1;i&amp;lt;=m;i++)
 		cin&amp;gt;&amp;gt;a[i];
 	for(int i=1;i&amp;lt;m;i++)
 	{
 		b[min(a[i],a[i+1])]++;
 		b[max(a[i],a[i+1])]--;
	 }
	 
	 for(int i=1;i&amp;lt;=n;i++)
	 	b[i]+=b[i-1];
	
//	for(int i=1;i&amp;lt;=n;i++)
//		cout&amp;lt;&amp;lt;&amp;quot;--&amp;quot;&amp;lt;&amp;lt;b[i]&amp;lt;&amp;lt;&#39; &#39;;
	
	LL sum=0;
	for(int i=1;i&amp;lt;n;i++)
	{
		LL ai,bi,ci;
		cin&amp;gt;&amp;gt;ai&amp;gt;&amp;gt;bi&amp;gt;&amp;gt;ci;
		sum+=min(ai*b[i],ci+bi*b[i]);
	}
	
	cout&amp;lt;&amp;lt;sum&amp;lt;&amp;lt;endl;
	return 0;
 }

Luogu1083
æ€è·¯1ï¼š
åˆ©ç”¨å·®åˆ†æ•°ç»„å­˜æ¯å¤©çš„æ•™å®¤ä½¿ç”¨æƒ…å†µï¼Œç„¶åæ±‚å‰ç¼€å’Œï¼Œå¦‚æœå‘ç°ä¸ç¬¦åˆè¦æ±‚ï¼Œå°±ä»åå¾€å‰æ’¤å›è®¢å•ï¼Œç›´åˆ°æ¯å¤©éƒ½ç¬¦åˆè¦æ±‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ’¤å›çš„æœ€åä¸€ä¸ªï¼ˆä¹Ÿå°±æ˜¯æœ€é å‰çš„ä¸€ä¸ªï¼‰å³ä¸ºans
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
using namespace std;
int n,m;
const int N=1000010,INF=0x3f3f3f3f;
int a[N];
int b[N];
int l[N],r[N],d[N];
int res=INF;

int main()
{
	cin&amp;gt;&amp;gt;n&amp;gt;&amp;gt;m;
	
	for(int i=1;i&amp;lt;=n;i++)
		scanf(&amp;quot;%d&amp;quot;,&amp;amp;a[i]);
	
	for(int i=1;i&amp;lt;=m;i++)
	{
		scanf(&amp;quot;%d%d%d&amp;quot;,&amp;amp;d[i],&amp;amp;l[i],&amp;amp;r[i]);
		b[l[i]]+=d[i];
		b[r[i]+1]-=d[i];
	}
	
	int j=m;//ä»åå¾€å‰æ’¤å›è®¢å•ï¼Œç›´è‡³æ»¡è¶³è¦æ±‚ 
	int sum=0;
	for(int i=1;i&amp;lt;=n;i++)
	{
		sum+=b[i];
		//cout&amp;lt;&amp;lt;sum&amp;lt;&amp;lt;&#39; &#39;;
		if(sum&amp;gt;a[i])
		{
			//ä»åå¾€å‰æ’¤å› 
			while(sum&amp;gt;a[i])
			{
				b[l[j]]-=d[j];
				b[r[j]+1]+=d[j];
				if(i&amp;gt;=l[j] &amp;amp;&amp;amp; i&amp;lt;=r[j])
					sum-=d[j];
				j--;
			}
			res=min(res,j);
		}	
	}
	
	if(res==INF)
		cout&amp;lt;&amp;lt;&amp;quot;0&amp;quot;;
    else 
		cout&amp;lt;&amp;lt;&amp;quot;-1&amp;quot;&amp;lt;&amp;lt;endl&amp;lt;&amp;lt;res+1&amp;lt;&amp;lt;endl;
    return 0;
}

æ€è·¯2ï¼š
åœ¨è¿™ä¸ªé¢˜é‡Œï¼Œå› ä¸ºå¦‚æœå‰ä¸€ä»½è®¢å•éƒ½ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆä¹‹åçš„æ‰€æœ‰è®¢å•éƒ½ä¸ç”¨ç»§ç»­è€ƒè™‘ï¼›è€Œå¦‚æœåä¸€ä»½è®¢å•éƒ½æ»¡è¶³ï¼Œé‚£ä¹ˆä¹‹å‰çš„æ‰€æœ‰è®¢å•ä¸€å®šéƒ½å¯ä»¥æ»¡è¶³ï¼Œç¬¦åˆå±€éƒ¨èˆå¼ƒæ€§ï¼Œæ‰€ä»¥å¯ä»¥äºŒåˆ†è®¢å•æ•°é‡ã€‚
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace std;
int n,m;
const int N=1000010,INF=0x3f3f3f3f;
int a[N];
int b[N];
int s[N],t[N],d[N];

bool check(int x)//åˆ¤æ–­å‰xä»½è®¢å•èƒ½å¦å…¨éƒ¨æ»¡è¶³ 
{
	memset(b,0,sizeof b);
	for(int i=1;i&amp;lt;=x;i++)
	{
		b[s[i]]+=d[i];
		b[t[i]+1]-=d[i];
	}

	for(int i=1;i&amp;lt;=n;i++)
	{
		b[i]+=b[i-1];
		if(b[i]&amp;gt;a[i])
			return false;
	}
	return true;
}

int main()
{
//	freopen(&amp;quot;test.in.txt&amp;quot;,&amp;quot;r&amp;quot;,stdin);
//	freopen(&amp;quot;test.out&amp;quot;,&amp;quot;w&amp;quot;,stdout);
	scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;n,&amp;amp;m);
	
	for(int i=1;i&amp;lt;=n;i++)
		scanf(&amp;quot;%d&amp;quot;,&amp;amp;a[i]);
	
	for(int i=1;i&amp;lt;=m;i++)
	{
		scanf(&amp;quot;%d%d%d&amp;quot;,&amp;amp;d[i],&amp;amp;s[i],&amp;amp;t[i]);
	}
	if(check(m))
	{
		puts(&amp;quot;0&amp;quot;);
		return 0;
	}
	int l=0,r=m;//lå–æˆ0ï¼Œé˜²æ­¢æ— è§£æƒ…å†µ 
	while(l&amp;lt;r)
	{
		int mid=l+r+1&amp;gt;&amp;gt;1;
		if(check(mid))
			l=mid;
		else	
			r=mid-1;
	}
	cout&amp;lt;&amp;lt;-1&amp;lt;&amp;lt;endl;
	cout&amp;lt;&amp;lt;l+1&amp;lt;&amp;lt;endl;

    return 0;
}

å‰ç¼€å’Œ+å·®åˆ†
luoguP3948
#include&amp;lt;bits/stdc++.h&amp;gt;
using namespace std;
const int N=80010;
typedef long long LL;
LL b[N];
int sum[N];
int n,opt,minn,maxx,l,r,x,f;
LL mod;
char ch[5];

int main()
{
    scanf(&amp;quot;%d%d%lld%d%d&amp;quot;,&amp;amp;n,&amp;amp;opt,&amp;amp;mod,&amp;amp;minn,&amp;amp;maxx);
    for(int j=1;j&amp;lt;=opt;j++){
        scanf(&amp;quot;%s%d%d%&amp;quot;,&amp;amp;ch,&amp;amp;l,&amp;amp;r);
        if(ch[0]==&#39;A&#39;){
            scanf(&amp;quot;%d&amp;quot;,&amp;amp;x);
            b[l]+=x;
            b[r+1]-=x;
        }
        else{
            int ans=0;
			LL now=0;
            for(int i=1;i&amp;lt;=r;i++){
                now+=b[i];
                if(i&amp;gt;=l&amp;amp;&amp;amp;(now*i)%mod&amp;gt;=minn&amp;amp;&amp;amp;(now*i)%mod&amp;lt;=maxx)ans++;
            }
            printf(&amp;quot;%d\n&amp;quot;,ans);
        }
    }
    scanf(&amp;quot;%d&amp;quot;,&amp;amp;f);
    for(int i=1;i&amp;lt;=n;i++){
        b[i]+=b[i-1];
        if((b[i]*i)%mod&amp;gt;=minn&amp;amp;&amp;amp;(b[i]*i)%mod&amp;lt;=maxx)sum[i]=sum[i-1]+1;
        else sum[i]=sum[i-1];
    }
    for(int j=1;j&amp;lt;=f;j++){
        scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;l,&amp;amp;r);
        printf(&amp;quot;%d\n&amp;quot;,sum[r]-sum[l-1]);
    }
    return 0;
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://caifxh.github.io/post/qian-zhui-he-chai-fen/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://caifxh.github.io/post/dan-diao-shu-ju-jie-gou/">
                        å•è°ƒæ•°æ®ç»“æ„
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-04-08</time>
                    
                        <a href="https://caifxh.github.io/tag/TZ7cITYtt/" class="post-tag i-tag
                            i-tag-banana">
            #å…¶ä»–ç®—æ³•
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            å•è°ƒæ ˆ

ç»™å®šä¸€ä¸ªåºåˆ—ã€‚å¯¹åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œæ±‚å‡ºå®ƒå·¦ä¾§çš„ç¬¬ä¸€ä¸ªå°äºå®ƒ çš„å…ƒç´ çš„ä½ç½®ã€‚è‹¥æ²¡æœ‰è¿™æ ·çš„å…ƒç´ ï¼Œè¾“å‡º0ã€‚

æ ·ä¾‹è¾“å…¥ï¼š
4
5 3 7 4
æ ·ä¾‹è¾“å‡ºï¼š
0 0 2 2

æ¨¡æ¿é¢˜1
#include&amp;lt;iostream&amp;gt;
using namespace std;
const int N=100010;
int stk[N],top;

int main()
{
    int n;
    cin&amp;gt;&amp;gt;n;
    while(n--)
    {
        int x;
        cin&amp;gt;&amp;gt;x;
        while(top&amp;amp;&amp;amp;stk[top]&amp;gt;=x)
            top--;
        if(top)  
            cout&amp;lt;&amp;lt;stk[top]&amp;lt;&amp;lt;&amp;quot; &amp;quot;;
        else 
            cout&amp;lt;&amp;lt;-1&amp;lt;&amp;lt;&amp;quot; &amp;quot;;
        stk[++top]=x;
    }
    return 0;
}

æ¨¡æ¿é¢˜2
æ‰¾å‡ºç¬¬ i ä¸ªå…ƒç´ ä¹‹åç¬¬ä¸€ä¸ªå¤§äº aiçš„å…ƒç´ çš„ä¸‹æ ‡
åˆ†æï¼š
ä»åå¾€å‰æšä¸¾ï¼Œå¯¹äºi&amp;lt;j,è‹¥a[i]&amp;gt;=a[j],åˆ™jä¸å¯èƒ½æˆä¸ºä¸‹æ ‡å°äºiçš„å…ƒç´ çš„ç­”æ¡ˆã€‚
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
using namespace std;
const int N=3e6+10;
int stk[N],top;
int n;
int a[N];
int ans[N];

int main()
{
	cin&amp;gt;&amp;gt;n;
	for(int i=1;i&amp;lt;=n;i++) scanf(&amp;quot;%d&amp;quot;,&amp;amp;a[i]);
	
	for(int i=n;i&amp;gt;=1;i--)
	{
		while(top &amp;amp;&amp;amp; a[stk[top]] &amp;lt;= a[i]) top--;
		
		if(top) ans[i]=stk[top];
		else ans[i]=0;
		
		stk[++top]=i;
		
	}
	
	for(int i=1;i&amp;lt;=n;i++) printf(&amp;quot;%d &amp;quot;,ans[i]);
	return 0;
}

ä¾‹é¢˜
poj2559

é¦–å…ˆè€ƒè™‘æœ€å¤§é¢ç§¯çš„çŸ©å½¢Xçš„å·¦å³è¾¹ç•Œçš„æ€§è´¨ï¼š
è®¾å…¶å·¦è¾¹ç•Œä¸ºLï¼Œå³è¾¹ç•Œä¸ºRï¼Œåˆ™å…¶é«˜H = min{h[i] | L &amp;lt;= i &amp;lt;= R}
æ­¤æ—¶æœ€å¤§é¢ç§¯ä¸º (R - L + 1) * H
è‹¥æ­¤æ—¶å·¦è¾¹ç•Œçš„å·¦è¾¹é‚£ä¸ªçŸ©å½¢çš„é«˜åº¦ h[L-1] &amp;gt;= H
åˆ™å·¦è¾¹ç•Œå¯ä»¥å‘å·¦æ‹“å±•ï¼Œåˆ™æ–°çš„é¢ç§¯ä¸ºï¼š
(R - (L-1) + 1) * H &amp;gt; åŸé¢ç§¯
åˆ™ä¸åŸå‡è®¾æ¡ä»¶å†²çª
æ•…å·¦è¾¹ç•Œå·¦è¾¹çš„é‚£ä¸ªçŸ©å½¢çš„é«˜åº¦ :h[L-1] &amp;lt; H
åŒç†å³è¾¹ç•Œå³è¾¹çš„é‚£ä¸ªçŸ©å½¢çš„é«˜åº¦ï¼š h[R+1] &amp;lt; H
è®¾H = h[i]
æ‰€ä»¥å·¦è¾¹ç•ŒLæ˜¯æ»¡è¶³h[j-1] &amp;lt; h[i]çš„æœ€å¤§çš„jï¼Œå³ä»iç‚¹å‘å·¦éå†çš„ç¬¬ä¸€ä¸ªé«˜åº¦æ¯”iå°çš„ç‚¹çš„å³è¾¹ä¸€ä¸ªç‚¹
è€Œå³è¾¹ç•ŒRæ˜¯æ»¡è¶³ h[j+1] &amp;lt; h[i]çš„æœ€å°çš„jï¼Œå³ä»iç‚¹å‘å³éå†ç¬¬ä¸€ä¸ªé«˜åº¦æ¯”iå°çš„ç‚¹çš„å·¦è¾¹ä¸€ä¸ªç‚¹
æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å•è°ƒæ ˆçš„æ€§è´¨å¾—åˆ°æ¯ä¸ªç¡®å®šç‚¹ï¼Œå³ç¡®å®šé«˜åº¦çš„æœ€å¤§é¢ç§¯çŸ©å½¢çš„å·¦å³è¾¹ç•Œï¼Œç„¶åæšä¸¾å–æœ€å¤§å³å¯ã€‚
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
typedef long long LL;
const int N=100010;
int h[N];
int l[N],r[N];
int stk[N],top;
int n;

int main()
{
	while(~scanf(&amp;quot;%d&amp;quot;,&amp;amp;n) &amp;amp;&amp;amp; n)
	{
		top=0;
		for(int i=1;i&amp;lt;=n;i++)
			scanf(&amp;quot;%d&amp;quot;,&amp;amp;h[i]);
		
		for(int i=1;i&amp;lt;=n;i++)//æ‰¾å‡ºh[i]å·¦è¾¹ç¬¬ä¸€ä¸ªå°äºh[i]çš„ä½ç½® 
		{
			while(top &amp;amp;&amp;amp; h[stk[top]] &amp;gt;= h[i]) 
				top--;
			
			if(top) l[i]=stk[top]+1;
			else l[i]=1;//è¡¨ç¤ºå·¦è¾¹æ²¡æœ‰æ¯”h[i]å°çš„ä½ç½® 
			
			stk[++top]=i;
		}
		
		top=0;
		for(int i=n;i&amp;gt;=1;i--)//æ‰¾å‡ºh[i]å³è¾¹ç¬¬ä¸€ä¸ªå°äºh[i]çš„ä½ç½® 
		{
			while(top &amp;amp;&amp;amp; h[stk[top]] &amp;gt;= h[i])
				top--;
			if(top) r[i]=stk[top]-1;
			else r[i]=n;//è¡¨ç¤ºå³è¾¹æ²¡æœ‰æ¯”h[i]å¤§çš„ä½ç½® 
				
			stk[++top]=i; 
		}
		
		LL ans=0;
		for(int i=1;i&amp;lt;=n;i++)
			ans=max(ans,(LL)h[i]*(r[i]-l[i]+1));
	
		printf(&amp;quot;%lld\n&amp;quot;,ans);
	}
	return 0;
}

P1901
å¯¹äºä¸€ä¸ªæ–°çš„ä¿¡å·å¡”:

å½“ä»–åŠ å…¥æ ˆä¸­æ—¶,ä¼šæŒ¡ä½ä¹‹å‰æ¯”å®ƒä½çš„å¡”çš„ä¼ æ’­,åŒæ—¶ , ä¹Ÿä¼šæ¥å—åˆ°æ¯”å®ƒä½çš„å¡”çš„ä¿¡å·
æ‰€ä»¥å°†æ ˆé¡¶æ‰€æœ‰æ¯”å®ƒä½çš„å¡”åˆ é™¤,(å› ä¸ºä»–ä»¬å·²ç»ä¸èƒ½å†ä¼ æ’­ç»™å…¶ä»–å¡”ä¿¡å·äº†),åŒæ—¶ , æ–°çš„å¡”æ¥æ”¶åˆ°çš„èƒ½é‡åŠ ä¸Š åˆ æ‰çš„å¡”ä¼ æ’­çš„èƒ½é‡
å¯¹äºåŸæœ‰çš„é«˜åº¦æ¯”å®ƒé«˜çš„ä¿¡å·å¡”,ç¦»æ­¤æ–°çš„ä¿¡å·å¡”æœ€è¿‘çš„(å½“å‰æ ˆé¡¶å…ƒç´ ),ä¼šæ¥å—åˆ°æ–°çš„å¡”çš„ä¿¡å·
å†å°†æ­¤æ–°çš„ä¿¡å·å¡”åŠ å…¥æ ˆä¸­,æœ€åO(n)æ‰«ä¸€éå,è¾“å‡ºæœ€å¤§å€¼å³å¯

#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
const int N=1e6+10;
int stk[N],top;
int sum[N];
int h[N],w[N];
int n;

int main()
{
	cin&amp;gt;&amp;gt;n;
	for(int i=1;i&amp;lt;=n;i++)
	{
		cin&amp;gt;&amp;gt;h[i]&amp;gt;&amp;gt;w[i];
		
		while(top &amp;amp;&amp;amp; h[stk[top]] &amp;lt;= h[i])
			sum[i]+=w[stk[top--]];
		sum[stk[top]]+=w[i];
		
		stk[++top]=i;
	}
	
	int ans=0;
	for(int i=1;i&amp;lt;=n;i++)
		ans=max(ans,sum[i]);
	
	printf(&amp;quot;%d\n&amp;quot;,ans);
	return 0;
}

P1823
å…ˆå‡è®¾æ¯ä¸ªäººèº«é«˜ä¸åŒï¼Œè„‘è¡¥ä¸€ä¸‹èµ°è¿‡æ•´ä¸ªé˜Ÿåˆ—ã€‚

è§‚å¯Ÿé˜Ÿä¼ä¸­çš„ä¸€ä¸ªäººAã€‚å¦‚æœæˆ‘ä»¬ä»–åé¢æ‰¾åˆ°äº†ä¸€ä¸ªæ¯”ä»–ä¸çŸ¥é“é«˜åˆ°å“ªé‡Œå»äº†çš„Bï¼ŒAå°±ä¸èƒ½ä¸Båé¢çš„äººè°ˆç¬‘é£ç”Ÿäº†ã€‚
å› æ­¤æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå•è°ƒæ ˆï¼Œè®°å½•æˆ‘ä»¬å·²ç»æ‰¾åˆ°è¿‡çš„é«˜äººï¼Œæ˜¾ç„¶æ ˆä¸Šçš„é«˜äººä»¬æŒ‰é«˜åº¦çš„é™åºæ’åˆ—ï¼Œæ ˆé¡¶çš„äººæœ€çŸ®ã€‚
å½“æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªæ–°çš„é«˜äººæ—¶ï¼Œä»–å¯ä»¥å‘æ ˆé‡Œæ¯”ä»–çŸ®çš„äººä¼ æˆäººç”Ÿç»éªŒï¼Œå¹¶è®©ä»–ä»¬å‡ºæ ˆã€‚å¦‚æœå‡ºæ ˆä¹‹åæ ˆéç©ºï¼Œä»–è¿˜å¯ä»¥ä¸æ ˆé¡¶çš„é«˜äººè°ˆç¬‘é£ç”Ÿã€‚ç„¶åæˆ‘ä»¬å†å¦è¯·è¿™ä½é«˜æ˜è¿›æ ˆã€‚
æˆ‘ä»¬è¿˜è¦è€ƒè™‘ä¸¤ä¸ªäººèº«é«˜ç›¸åŒçš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ ˆé‡Œå­˜pair&amp;lt;èº«é«˜ï¼Œäººæ•°&amp;gt;å¹¶ç»´æŠ¤å®ƒã€‚

#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
typedef pair&amp;lt;int,int&amp;gt; PII;
#define x first
#define y second
typedef long long LL;
const int N=500010;
int h[N];
PII stk[N];
int top;
int n;

int main()
{
	cin&amp;gt;&amp;gt;n;
	LL ans=0;
	for(int i=1;i&amp;lt;=n;i++)
	{
		scanf(&amp;quot;%d&amp;quot;,&amp;amp;h[i]);
		
		PII p=make_pair(h[i],1);
		while(top &amp;amp;&amp;amp; stk[top].x &amp;lt;= h[i])
		{
			if(stk[top].x == h[i]) 
				p.y+=stk[top].y;
			ans+=stk[top].y;
			top--;
		}
		
		if(top) ans++;
		stk[++top]=p;
	}
	printf(&amp;quot;%lld\n&amp;quot;,ans);
	return 0;
}

å•è°ƒé˜Ÿåˆ—

æ¨¡æ¿é¢˜

å•è°ƒé˜Ÿåˆ—ä¸æ™®é€šé˜Ÿåˆ—ä¸ä¸€æ ·çš„åœ°æ–¹å°±åœ¨äºå•è°ƒé˜Ÿåˆ—æ—¢å¯ä»¥ä»é˜Ÿé¦–å‡ºé˜Ÿï¼Œä¹Ÿå¯ä»¥ä»é˜Ÿå°¾å‡ºé˜Ÿã€‚
é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€æ ·å®ç°å•è°ƒé˜Ÿåˆ—å‘¢?
å°±æ‹¿æ ·ä¾‹æ¥è°ˆè°ˆï¼Œè®¾ä»¥æœ€å°çš„ä¸ºæ ‡å‡†ã€‚

8 3
1 3 -1 -3 5 3 6 7
ä¸‹æ–‡ä¸­æˆ‘ä»¬ç”¨qæ¥è¡¨ç¤ºå•è°ƒé˜Ÿåˆ—ï¼Œpæ¥è¡¨ç¤ºå…¶æ‰€å¯¹åº”çš„åœ¨åŸåˆ—è¡¨é‡Œçš„åºå·ã€‚


ç”±äºæ­¤æ—¶é˜Ÿä¸­æ²¡æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ç›´æ¥ä»¤1è¿›é˜Ÿã€‚æ­¤æ—¶ï¼Œq={1},p={1}ã€‚


ç°åœ¨3é¢ä¸´ç€æŠ‰æ‹©ã€‚ä¸‹é¢åŸºäºè¿™æ ·ä¸€ä¸ªæ€æƒ³:å‡å¦‚æŠŠ3æ”¾è¿›å»ï¼Œå¦‚æœåé¢2ä¸ªæ•°éƒ½æ¯”å®ƒå¤§ï¼Œé‚£ä¹ˆ3åœ¨å…¶æœ‰ç”Ÿä¹‹å¹´å°±æœ‰å¯èƒ½æˆä¸ºæœ€å°çš„ã€‚æ­¤æ—¶ï¼Œq={1,3},p={1,2}


ä¸‹é¢å‡ºç°äº†-1ã€‚é˜Ÿå°¾å…ƒç´ 3æ¯”-1å¤§ï¼Œé‚£ä¹ˆæ„å‘³ç€åªè¦-1è¿›é˜Ÿï¼Œé‚£ä¹ˆ3åœ¨å…¶æœ‰ç”Ÿä¹‹å¹´å¿…å®šæˆä¸ºä¸äº†æœ€å°å€¼ï¼ŒåŸå› å¾ˆæ˜æ˜¾:å› ä¸ºå½“ä¸‹é¢3è¢«æ¡†èµ·æ¥ï¼Œé‚£ä¹ˆ-1ä¹Ÿä¸€å®šè¢«æ¡†èµ·æ¥ï¼Œæ‰€ä»¥3æ°¸è¿œä¸èƒ½å½“æœ€å°å€¼ã€‚æ‰€ä»¥ï¼Œ3ä»é˜Ÿå°¾å‡ºé˜Ÿã€‚åŒç†ï¼Œ1ä»é˜Ÿå°¾å‡ºé˜Ÿã€‚æœ€å-1è¿›é˜Ÿï¼Œæ­¤æ—¶q={-1},p={3}


å‡ºç°-3ï¼ŒåŒä¸Šé¢åˆ†æï¼Œ-1&amp;gt;-3ï¼Œ-1ä»é˜Ÿå°¾å‡ºé˜Ÿ,-3ä»é˜Ÿå°¾è¿›é˜Ÿã€‚q={-3}ï¼Œp={4}ã€‚


å‡ºç°5ï¼Œå› ä¸º5&amp;gt;-3ï¼ŒåŒç¬¬äºŒæ¡åˆ†æï¼Œ5åœ¨æœ‰ç”Ÿä¹‹å¹´è¿˜æ˜¯æœ‰å¸Œæœ›çš„ï¼Œæ‰€ä»¥5è¿›é˜Ÿã€‚æ­¤æ—¶ï¼Œq={-3,5},p={4,5}


å‡ºç°3ã€‚3å…ˆä¸é˜Ÿå°¾çš„5æ¯”è¾ƒï¼Œ3&amp;lt;5ï¼ŒæŒ‰ç…§ç¬¬3æ¡çš„åˆ†æï¼Œ5ä»é˜Ÿå°¾å‡ºé˜Ÿã€‚3å†ä¸-3æ¯”è¾ƒï¼ŒåŒç¬¬äºŒæ¡åˆ†æï¼Œ3è¿›é˜Ÿã€‚æ­¤æ—¶ï¼Œq={-3,3},p={4,6}


å‡ºç°6ã€‚6ä¸3æ¯”è¾ƒï¼Œå› ä¸º3&amp;lt;6ï¼Œæ‰€ä»¥3ä¸å¿…å‡ºé˜Ÿã€‚ç”±äº3ä»¥å‰å…ƒç´ éƒ½ï¼œ3ï¼Œæ‰€ä»¥ä¸å¿…å†æ¯”è¾ƒï¼Œ6è¿›é˜Ÿã€‚å› ä¸º-3æ­¤æ—¶å·²ç»åœ¨æ»‘åŠ¨çª—å£ä¹‹å¤–ï¼Œæ‰€ä»¥-3ä»é˜Ÿé¦–å‡ºé˜Ÿã€‚æ­¤æ—¶ï¼Œq={3,6},p={6,7}


å‡ºç°7ã€‚é˜Ÿå°¾å…ƒç´ 6å°äº7ï¼Œ7è¿›é˜Ÿã€‚æ­¤æ—¶ï¼Œq={3,6,7},p={6,7,8}ã€‚


é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯¹å•è°ƒé˜Ÿåˆ—çš„åŸºæœ¬æ“ä½œå·²ç»åˆ†æå®Œæ¯•ã€‚å› ä¸ºå•è°ƒé˜Ÿåˆ—ä¸­å…ƒç´ å¤§å°å•è°ƒé€’(å¢/å‡/è‡ªå®šä¹‰æ¯”è¾ƒ)ï¼Œå› æ­¤ï¼Œé˜Ÿé¦–å…ƒç´ å¿…å®šæ˜¯æœ€å€¼ã€‚æŒ‰é¢˜æ„è¾“å‡ºå³å¯ã€‚
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
const int N=1000010;
int a[N];
int q[N];
int n,k;

int main()
{
	scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;n,&amp;amp;k);
	
	int hh=0,tt=-1;
	
	for(int i=1;i&amp;lt;=n;i++)
		scanf(&amp;quot;%d&amp;quot;,&amp;amp;a[i]);
		
	for(int i=1;i&amp;lt;=n;i++)//æ±‚æ»‘åŠ¨çª—å£æœ€å°å€¼ 
	{
		if(hh &amp;lt;= tt &amp;amp;&amp;amp; i-k&amp;gt;= q[hh]) hh++;
		while(hh &amp;lt;= tt &amp;amp;&amp;amp; a[q[tt]] &amp;gt;= a[i])
			tt--;
		q[++tt]=i;
		if(i &amp;gt;= k)
			printf(&amp;quot;%d &amp;quot;,a[q[hh]]);
	}
	puts(&amp;quot;&amp;quot;);
	
	hh=0,tt=-1;
	for(int i=1;i&amp;lt;=n;i++)
	{
		if(hh &amp;lt;= tt &amp;amp;&amp;amp; i-k&amp;gt;=q[hh]) hh++;
		while(hh &amp;lt;= tt &amp;amp;&amp;amp; a[q[tt]] &amp;lt;= a[i])
			tt--;
		q[++tt]=i;
		if(i &amp;gt;= k)
			printf(&amp;quot;%d &amp;quot;,a[q[hh]]);
	}
	return 0;
}

acwing135

#include &amp;lt;cstring&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;algorithm&amp;gt;
using namespace std;
const int N = 300010, INF = 0x3f3f3f3f;
int n, m;
int s[N];
int q[N];

int main()
{
    scanf(&amp;quot;%d%d&amp;quot;, &amp;amp;n, &amp;amp;m);
    for (int i = 1; i &amp;lt;= n; i ++ ) scanf(&amp;quot;%d&amp;quot;, &amp;amp;s[i]), s[i] += s[i - 1];

    int res = -INF;
    int hh = 0, tt = -1;
    q[++tt]=0;//å°†s[0]å…¥é˜Ÿ
    for (int i = 1; i &amp;lt;= n; i ++ )
    {
        if(hh&amp;lt;=tt &amp;amp;&amp;amp; i-m &amp;gt; q[hh]) hh++;
        res=max(res,s[i]-s[q[hh]]);
        while (hh &amp;lt;= tt &amp;amp;&amp;amp; s[q[tt]] &amp;gt;= s[i]) tt -- ;
        q[ ++ tt] = i;
    }

    printf(&amp;quot;%d\n&amp;quot;, res);

    return 0;
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://caifxh.github.io/post/dan-diao-shu-ju-jie-gou/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://caifxh.github.io/post/gao-jing-du/">
                        é«˜ç²¾åº¦
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-04-08</time>
                    
                        <a href="https://caifxh.github.io/tag/TZ7cITYtt/" class="post-tag i-tag
                            i-tag-other_3">
            #å…¶ä»–ç®—æ³•
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            é«˜ç²¾åº¦åŠ æ³•
å½“è¿›è¡ŒåŠ æ³•è¿ç®—çš„æ•°å­—è¾ƒå¤§æ—¶ï¼Œå—å­˜å‚¨èŒƒå›´é™åˆ¶ï¼Œæ— æ³•ä½¿ç”¨intæˆ–longlongå‹å˜é‡è¿›è¡Œå­˜å‚¨ã€‚
è€ƒè™‘åˆ°åŠ æ³•è¿ç®—çš„æœ¬è´¨ï¼Œä¸å¦¨å°†æ•°å­—æ‹†å¼€æ¥å­˜å‚¨ã€‚
å¯¹äºä¸€ä¸ªè¶…è¿‡å˜é‡å­˜å‚¨æ•°æ®èŒƒå›´çš„æ•°å­—ï¼Œå¯ä»¥å°†è¿™ä¸ªæ•°å­—æ‹†å¼€ï¼Œæ‹†æˆä¸€ä½ä¸€ä½çš„ï¼Œæˆ–è€…æ˜¯å‡ ä½å‡ ä½çš„å­˜å‚¨åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œ ç”¨ä¸€ä¸ªæ•°ç»„å»è¡¨ç¤ºä¸€ä¸ªæ•°å­—
é‡‡ç”¨ç”¨é¡ºåºå­˜å‚¨æ•°æ®æ–¹å¼ï¼Œä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šæœ€é«˜ä½è¿›ä½å˜å¾—å¾ˆå›°éš¾ã€‚
æœ€é«˜ä½åœ¨num[0]ï¼Œæ‰€ä»¥ä¸€æ—¦æœ‰è¿›ä½ï¼Œéœ€è¦å°†num[]æ•°ç»„ä¸­æ¯ä¸€ä½éƒ½å¾€åç§»ï¼Œæ—¶é—´å¤æ‚åº¦O(len)
Â·å€’åºå­˜å‚¨Â·ï¼šnum[]æ•°ç»„ä»0åˆ°len-1ä¾æ¬¡å­˜å‚¨æ•´æ•°ä¸ªä½åˆ°æœ€é«˜ä½ã€‚åˆ™æœ€é«˜ä½è¿›ä½æ—¶ï¼Œåªéœ€è¦num[len++]=tï¼Œtä¸ºæœ€é«˜ä½æ•°å­—
è¿›ä½ï¼š
æ–¹æ³•ä¸€ï¼šè®¾ä¸€ä¸ªå˜é‡tï¼Œè®°å½•å½“å‰è¿›ä½
è¾¹è®¡ç®—è¾¹è¿›ä½å’Œé€ä½ç›¸åŠ ä¸è¿›ä½æœ€åå†ç»Ÿä¸€è¿›ä½æ•ˆæœæ˜¯ä¸€æ ·çš„å¦‚ä¸‹ï¼Œå…ˆè¿›è¡Œä¸€éé€ä½ç›¸åŠ ã€‚
ç„¶åï¼Œä»0å¼€å§‹éå†ä¸€éans.num[]ï¼Œå°†æœ¬ä½å¤§äº9çš„éƒ¨åˆ†è¿›ä½ç»™æ›´é«˜ä½ã€‚
æœ€ååˆ¤æ–­æ˜¯å¦æœ€é«˜ä½æœ‰è¿›ä½ï¼Œæœ‰åˆ™ans.len++
æ¨¡æ¿é¢˜
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstdio&amp;gt;
using namespace std;
const int N=510;
char s[N];
struct bignum
{
	int m[N],len;
	bignum()
	{
		memset(m,0,sizeof m);
		len=0;
	}
};

bignum add(bignum a,bignum b)
{
	bignum c;
	c.len=max(a.len , b.len);
	for(int i=0;i&amp;lt;c.len;i++) c.m[i]=a.m[i]+b.m[i];
	for(int i=0;i&amp;lt;c.len;i++)
		if(c.m[i] &amp;gt; 9)
		{
			c.m[i+1]+=1;
			c.m[i]-=10;
		}
	if(c.m[c.len]) c.len++;
	return c;
}

int main()
{
	scanf(&amp;quot;%s&amp;quot;,s);
	bignum a,b;
	int len=strlen(s);
	a.len=len;
	for(int i=0;i&amp;lt;len;i++)
		a.m[len-i-1]=s[i]-&#39;0&#39;;
	
	scanf(&amp;quot;%s&amp;quot;,s);
	len=strlen(s);
	b.len=len;
	for(int i=0;i&amp;lt;len;i++)
		b.m[len-i-1]=s[i]-&#39;0&#39;;
	bignum c=add(a,b);
	for(int i=c.len-1;i&amp;gt;=0;i--)
		printf(&amp;quot;%d&amp;quot;,c.m[i]);
	puts(&amp;quot;&amp;quot;);
	return 0;
}

é«˜ç²¾åº¦å‡æ³•

åˆ¤æ–­æ­£è´Ÿ
åŸºæœ¬å’ŒåŠ æ³•ä¸€æ¨¡ä¸€æ ·ï¼Œåªä¸è¿‡ä»è¿›ä½å˜æˆé€€ä½
é€€ä½åæ›´æ–°ç»“æœé•¿åº¦
æ¨¡æ¿é¢˜

#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstdio&amp;gt;
using namespace std;
const int N=10100;
char s[N];
struct bignum
{
	int m[N],len;
	bignum()
	{
		memset(m,0,sizeof m);
		len=0;
	}
};

int judge(bignum a,bignum b)
{
	if(a.len &amp;gt; b.len) return 1;
	if(a.len &amp;lt; b.len) return -1;
	for(int i=a.len-1;i&amp;gt;=0;i--)
	{
		if(a.m[i] &amp;gt; b.m[i]) return 1;
		if(a.m[i] &amp;lt; b.m[i]) return -1;
	}
	return 0;
}

bignum Minus(bignum a,bignum b)
{
	if(judge(a,b) == -1)
	{
		printf(&amp;quot;-&amp;quot;);
		return Minus(b,a);
	}

	bignum c;
	c.len=a.len;
	for(int i=0;i&amp;lt;c.len;i++) c.m[i]=a.m[i]-b.m[i];
	for(int i=0;i&amp;lt;c.len;i++)
		if(c.m[i] &amp;lt; 0)
		{
			c.m[i+1]-=1;
			c.m[i]+=10;
		}
	while(c.len &amp;gt; 1 &amp;amp;&amp;amp; !c.m[c.len-1]) c.len--;
	return c;
}

int main()
{
	scanf(&amp;quot;%s&amp;quot;,s);
	bignum a,b;
	int len=strlen(s);
	a.len=len;
	for(int i=0;i&amp;lt;len;i++)
		a.m[len-i-1]=s[i]-&#39;0&#39;;
	
	scanf(&amp;quot;%s&amp;quot;,s);
	len=strlen(s);
	b.len=len;
	for(int i=0;i&amp;lt;len;i++)
		b.m[len-i-1]=s[i]-&#39;0&#39;;
	bignum c=Minus(a,b);
	for(int i=c.len-1;i&amp;gt;=0;i--)
		printf(&amp;quot;%d&amp;quot;,c.m[i]);
	puts(&amp;quot;&amp;quot;);
	return 0;
}

é«˜ç²¾åº¦ä¹˜æ³•
1.é«˜ç²¾*ä½ç²¾
å°†åŠ æ³•è¿ç®—æ”¹ä¸ºä¹˜æ³•è¿ç®—å³å¯ã€‚
æ³¨æ„ï¼š

è¿›ä½çš„è¿ç®—
æœ€é«˜ä½è¿›ä½çš„å¤„ç†ï¼Œå¯èƒ½ä¸æ­¢è¿›ä¸€ä½
æ¨¡æ¿é¢˜

#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstdio&amp;gt;
using namespace std;
const int N=100010;
char s[N];
struct bignum
{
	int m[N],len;
	bignum()
	{
		memset(m,0,sizeof m);
		len=0;
	}
};

bignum mul(bignum a,int b)
{
	bignum c;
	c.len=a.len;
	for(int i=0;i&amp;lt;c.len;i++) c.m[i]=a.m[i]*b;
	for(int i=0;i&amp;lt;c.len;i++)
	{
		c.m[i+1]+=c.m[i]/10;
		c.m[i]%=10;
		if(i == c.len-1 &amp;amp;&amp;amp; c.m[i+1]) c.len++;
	}

	return c;
}

int main()
{
	scanf(&amp;quot;%s&amp;quot;,s);
	bignum a;
	int len=strlen(s);
	a.len=len;
	for(int i=0;i&amp;lt;len;i++)
		a.m[len-i-1]=s[i]-&#39;0&#39;;
	
	int b;
	scanf(&amp;quot;%d&amp;quot;,&amp;amp;b);

	bignum c=mul(a,b);
	for(int i=c.len-1;i&amp;gt;=0;i--)
		printf(&amp;quot;%d&amp;quot;,c.m[i]);
	puts(&amp;quot;&amp;quot;);
	return 0;
}

2.é«˜ç²¾*é«˜ç²¾
ä¹˜æ³•ç«–å¼ä¸­ï¼Œa.num[i]å’Œb.num[j]ç›¸ä¹˜çš„ç»“æœï¼Œæ”¾åœ¨äº†ans.num[i+j]çš„ä½ç½®ã€‚
a,béƒ½ä¸ºæ­£æ•´æ•°æ—¶ï¼Œé•¿åº¦ä¸ºa.lenå’Œb.lençš„æ•°å­—ç›¸ä¹˜å¾—åˆ°ansï¼Œåˆ™

æ¨¡æ‹Ÿä¸Šä¾‹ç«–å¼è¿ç®—è¿‡ç¨‹å³å¯
{æ¨¡æ¿é¢˜](https://www.luogu.com.cn/problem/P1303}
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstdio&amp;gt;
using namespace std;
const int N=4010;
char s[N];
struct bignum
{
	int m[N],len;
	bignum()
	{
		memset(m,0,sizeof m);
		len=0;
	}
};

bignum mul(bignum a,bignum b)
{
	bignum c;
	c.len=a.len+b.len;
	for(int i=0;i&amp;lt;a.len;i++)
		for(int j=0;j&amp;lt;b.len;j++)
			c.m[i+j]+=a.m[i]*b.m[j];
	for(int i=0;i&amp;lt;c.len;i++)
	{
		c.m[i+1]+=c.m[i]/10;
		c.m[i]%=10;
	}
	while(c.len &amp;gt; 1 &amp;amp;&amp;amp; !c.m[c.len-1]) c.len--;
	return c;
}

int main()
{
	scanf(&amp;quot;%s&amp;quot;,s);
	bignum a,b;
	int len=strlen(s);
	a.len=len;
	for(int i=0;i&amp;lt;len;i++)
		a.m[len-i-1]=s[i]-&#39;0&#39;;
	
	scanf(&amp;quot;%s&amp;quot;,s);
	b.len=len=strlen(s);
	for(int i=0;i&amp;lt;len;i++)
		b.m[len-i-1]=s[i]-&#39;0&#39;;
	bignum c=mul(a,b);
	for(int i=c.len-1;i&amp;gt;=0;i--)
		printf(&amp;quot;%d&amp;quot;,c.m[i]);
	puts(&amp;quot;&amp;quot;);
	return 0;
}

é«˜ç²¾åº¦é™¤æ³•
1.é«˜ç²¾/ä½ç²¾
é™¤æ³•æ˜¯ä»é«˜ä½åˆ°ä½ä½è¿›è¡Œè¿ç®—çš„ã€‚ä½¿ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡æ¥è®°å½•ä½™æ•°ï¼Œæ³¨æ„ç»†èŠ‚
æ¨¡æ¿é¢˜
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstdio&amp;gt;
using namespace std;
const int N=100010;
char s[N];
struct bignum
{
	int m[N],len;
	bignum()
	{
		memset(m,0,sizeof m);
		len=0;
	}
};
int t;

bignum Div(bignum a,int b)
{
	bignum c;
	c.len=a.len;
	t=0;
	for(int i=c.len-1;i&amp;gt;=0;i--)
	{
		t=t*10+a.m[i];
		c.m[i]=t/b;
		t%=b;
	}
	while(c.len &amp;gt; 1 &amp;amp;&amp;amp; !c.m[c.len-1]) c.len--;
	return c;
}

int main()
{
	scanf(&amp;quot;%s&amp;quot;,s);
	bignum a;
	int len=strlen(s);
	a.len=len;
	for(int i=0;i&amp;lt;len;i++)
		a.m[len-i-1]=s[i]-&#39;0&#39;;
	
	int b;
	scanf(&amp;quot;%d&amp;quot;,&amp;amp;b);
	bignum c=Div(a,b);
	for(int i=c.len-1;i&amp;gt;=0;i--)
		printf(&amp;quot;%d&amp;quot;,c.m[i]);
	puts(&amp;quot;&amp;quot;);
	printf(&amp;quot;%d\n&amp;quot;,t);

	return 0;
}

æ•°æ¥¼æ¢¯
æ–æ³¢é‚£å¥‘é€’æ¨
code

                                        </div>
                                        
                                            <a class="btn btn-text" href="https://caifxh.github.io/post/gao-jing-du/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://caifxh.github.io/post/shu-xing-dp/">
                        æ ‘å½¢dp
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-04-06</time>
                    
                        <a href="https://caifxh.github.io/tag/hLQFdtGuD/" class="post-tag i-tag
                            i-tag-error">
            #DP
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            æ ‘çš„é‡å¿ƒ
å¯¹äºä¸€æ£µ n ä¸ªèŠ‚ç‚¹çš„æ— æ ¹æ ‘ï¼Œæ‰¾åˆ°ä¸€ä¸ªç‚¹ Aï¼Œä½¿å¾—æŠŠæ ‘å˜æˆä»¥
è¯¥ç‚¹ä¸ºæ ¹çš„æœ‰æ ¹æ ‘æ—¶ï¼Œæœ€å¤§å­æ ‘çš„ç»“ç‚¹æ ‘æœ€å°ã€‚A å«åšé‡å¿ƒã€‚
ç»™å®šä¸€æ£µæ ‘ï¼Œæ‰¾é‡å¿ƒã€‚
æ±‚ä¸€ä¸‹æ¯ä¸ªç‚¹å­æ ‘çš„ç‚¹æ•°ï¼Œç„¶åå¯¹äºæ¯ä¸ªç‚¹è€ƒè™‘ä¸€ä¸‹ä»–ä½œä¸ºé‡å¿ƒ
æ—¶å€™æœ€å¤§å­æ ‘çš„å¤§å°æ˜¯å¤šå°‘ï¼Œå’Œå½“å‰çš„é‡å¿ƒè¿›è¡Œæ¯”å¯¹å°±å¯ä»¥äº†ã€‚
ä»£ç éå¸¸ç®€å•æ˜“æ‡‚ã€‚
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace  std;
const int N=100010,M=N*2;
int h[N],e[M],ne[M],idx;
int ans=N;
bool st[N];
int cnt[N];
int n;
int poi;

void add(int a,int b)
{
    e[idx]=b;
    ne[idx]=h[a];
    h[a]=idx++;
}

void dfs(int u,int fa)
{
    cnt[u]=1;
    int res=0;
    for(int i=h[u];i!=-1;i=ne[i])
    {
        int j=e[i];
        if(j == fa)
            continue;
        dfs(j,u);
        cnt[u]+=cnt[j];
        res=max(res,cnt[j]);
    }
    res=max(res,n-cnt[u]);

    if(res &amp;lt; ans)
    {
        ans=res;
        poi=u;
    }
}

int main()
{
    
    memset(h,-1,sizeof h);
    cin&amp;gt;&amp;gt;n;
    for(int i=0;i&amp;lt;n-1;i++)
    {
        int a,b;
        cin&amp;gt;&amp;gt;a&amp;gt;&amp;gt;b;
        add(a,b);
        add(b,a);
    }
    
    dfs(1,-1);
    
    cout&amp;lt;&amp;lt;ans&amp;lt;&amp;lt;endl;
    //cout&amp;lt;&amp;lt;poi&amp;lt;&amp;lt;endl;é‡å¿ƒ
    return 0;
}

æ ‘çš„æœ€é•¿è·¯å¾„
å¦¨æšä¸¾ç›´å¾„åœ¨æ ‘ä¸Šè½¬å¼¯çš„ç‚¹ã€‚æ‰€ä»¥æˆ‘ä»¬ç»´æŠ¤å‡ºåˆ°ä¸€ä¸ªèŠ‚ç‚¹
æ—¶å‘ä¸‹çš„æœ€é•¿é“¾å’Œæ¬¡é•¿é“¾ï¼Œç„¶åç”¨äºŒè€…åŠ å’Œæ¥æ›´æ–°ç­”æ¡ˆï¼ŒåŒæ—¶æ›´
æ–°çˆ¶äº²èŠ‚ç‚¹çš„æœ€é•¿é“¾å’Œæ¬¡é•¿é“¾ã€‚
f[i][0]è¡¨ç¤ºæ ¹èŠ‚ç‚¹ä¸ºiï¼Œå‘ä¸‹æ‰€èƒ½åˆ°è¾¾çš„æœ€é•¿è·¯å¾„é•¿åº¦
f[i][1]è¡¨ç¤ºæ ¹èŠ‚ç‚¹ä¸ºiï¼Œå‘ä¸‹æ‰€èƒ½åˆ°è¾¾çš„æ¬¡é•¿è·¯å¾„é•¿åº¦
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace std;
const int N=10010,M=N*2;
int h[N],e[M],ne[M],w[M],idx;
int n,m;
int ans;
int f[N][2];//0è¡¨ç¤ºæœ€é•¿è·¯å¾„ï¼Œ 1è¡¨ç¤ºæ¬¡é•¿è·¯å¾„

void add(int a, int b, int c)
{
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx ++ ;
}

void dfs(int u,int fa)
{
    for(int i=h[u];~i;i=ne[i])
    {
        int v=e[i];
        if(v == fa)
            continue;
        dfs(v,u);
        if(f[v][0] + w[i] &amp;gt; f[u][0])
        {
            f[u][1]=f[u][0];
            f[u][0]=f[v][0]+w[i];
        }
        else if(f[v][0] + w[i] &amp;gt; f[u][1])
            f[u][1]=f[v][0]+w[i];
    }
    
    ans=max(ans,f[u][0]+f[u][1]);
}

int main()
{
    cin&amp;gt;&amp;gt;n;
    memset(h,-1,sizeof h);
    for(int i=0;i&amp;lt;n-1;i++)
    {
        int a,b,c;
        cin&amp;gt;&amp;gt;a&amp;gt;&amp;gt;b&amp;gt;&amp;gt;c;
        add(a,b,c);
        add(b,a,c);
    }

    dfs(1,-1);

    cout&amp;lt;&amp;lt;ans&amp;lt;&amp;lt;endl;

    return 0;
}

hdu2196
    
f[i][0]è¡¨ç¤ºæ ¹èŠ‚ç‚¹ä¸ºiï¼Œå‘ä¸‹æ‰€èƒ½åˆ°è¾¾çš„æœ€é•¿è·¯å¾„é•¿åº¦
f[i][1]è¡¨ç¤ºæ ¹èŠ‚ç‚¹ä¸ºiï¼Œå‘ä¸‹æ‰€èƒ½åˆ°è¾¾çš„æ¬¡é•¿è·¯å¾„é•¿åº¦
f[i][2]è¡¨ç¤ºæ ¹èŠ‚ç‚¹ä¸ºiï¼Œå‘ä¸Šæ‰€èƒ½åˆ°è¾¾çš„æœ€é•¿è·¯å¾„é•¿åº¦
ï¼ˆ1ï¼‰f[i][0]ï¼Œf[i][1]çš„æ±‚æ³•åŒæ ‘çš„ç›´å¾„
ï¼ˆ2ï¼‰f[i][2]çš„æ±‚æ³•åˆ†ä¸¤ç§æƒ…å†µï¼š
â‘ ä»çˆ¶ç»“ç‚¹å‘ä¸Šèµ°çš„æœ€é•¿è·¯å¾„é•¿åº¦
â‘¡ä»çˆ¶èŠ‚ç‚¹å‘ä¸‹èµ°å…¶ä»–å­æ ‘çš„æœ€é•¿è·¯å¾„é•¿åº¦ï¼ˆè‹¥çˆ¶èŠ‚ç‚¹å‘ä¸‹èµ°çš„æœ€é•¿è·¯å¾„ç»è¿‡å½“å‰ç‚¹ï¼Œåˆ™å‘ä¸‹èµ°å…¶ä»–å­æ ‘çš„æœ€é•¿è·¯å¾„é•¿åº¦ä¸ºçˆ¶èŠ‚ç‚¹å‘ä¸‹èµ°çš„æ¬¡é•¿è·¯å¾„é•¿åº¦ï¼›è‹¥ä¸ç»è¿‡ï¼Œåˆ™å–çˆ¶èŠ‚ç‚¹å‘ä¸‹èµ°çš„æœ€é•¿è·¯å¾„ï¼‰
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace std;
const int N=10010,M=N*2;
int h[N],e[M],ne[M],w[M],idx;
int n;
int f[N][3]; // 0è¡¨ç¤ºå‘ä¸‹èµ°çš„æœ€å¤§é•¿åº¦ï¼Œ1è¡¨ç¤ºæ¬¡å¤§é•¿åº¦ï¼Œ2è¡¨ç¤ºå‘ä¸Šèµ°çš„æœ€å¤§é•¿åº¦

void add(int a, int b, int c)
{
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx ++ ;
}

void dfs_d(int u,int fa)
{
    int one=0,two=0;
    for(int i=h[u];~i;i=ne[i])
    {
        int j=e[i];
        if(j == fa)
            continue;
        dfs_d(j,u);
        //cout&amp;lt;&amp;lt;u&amp;lt;&amp;lt;&amp;quot;:&amp;quot;&amp;lt;&amp;lt;j&amp;lt;&amp;lt;&amp;quot; &amp;quot;&amp;lt;&amp;lt;d&amp;lt;&amp;lt;endl;
        int d=f[j][0]+w[i];
        if(d &amp;gt; one) 
            two=one,one=d;
        else if(d &amp;gt; two)
            two=d;
    }
    f[u][0]=one;
    f[u][1]=two;
}

void dfs_u(int u,int fa)//å…ˆæ›´æ–°åé€’å½’
{
    for(int i=h[u];~i;i=ne[i])
    {
        int j=e[i];
        if(j == fa) 
            continue;
        if(f[j][0] + w[i] == f[u][0])//çˆ¶èŠ‚ç‚¹å‘ä¸‹èµ°çš„æœ€é•¿è·¯å¾„ç»è¿‡å½“å‰ç‚¹
            f[j][2]=max(f[u][2],f[u][1])+w[i];
        else 
            f[j][2]=max(f[u][2],f[u][0])+w[i];//çˆ¶èŠ‚ç‚¹å‘ä¸‹èµ°çš„æœ€é•¿è·¯å¾„ä¸ç»è¿‡å½“å‰ç‚¹
        dfs_u(j,u);
    }
}

int main()
{
    while(~scanf(&amp;quot;%d&amp;quot;,&amp;amp;n))
    {
        memset(h,-1,sizeof h);
        memset(f,0,sizeof f);
        idx=0;
        
        for(int i=2;i&amp;lt;=n;i++)
        {
            int a,b;
            cin&amp;gt;&amp;gt;a&amp;gt;&amp;gt;b;
            add(i,a,b);
            add(a,i,b);
        }
        
        dfs_d(1,-1);//å­èŠ‚ç‚¹æ›´æ–°çˆ¶èŠ‚ç‚¹
        
        dfs_u(1,-1);//çˆ¶èŠ‚ç‚¹æ›´æ–°å­èŠ‚ç‚¹
        
        for(int i=1;i&amp;lt;=n;i++)
            cout&amp;lt;&amp;lt;max(f[i][0],f[i][2])&amp;lt;&amp;lt;endl;
    }
    
    return 0;
}


æˆ‘ä»¬é€šå¸¸è®¤ä¸ºï¼Œæ ‘å½¢DPçš„å†™æ³•æœ‰ä¸¤ç§ï¼š
a.æ ¹åˆ°å¶å­: ä¸è¿‡è¿™ç§åŠ¨æ€è§„åˆ’åœ¨å®é™…çš„é—®é¢˜ä¸­è¿ç”¨çš„ä¸å¤šã€‚
b.å¶å­åˆ°æ ¹: æ—¢æ ¹çš„å­èŠ‚ç‚¹ä¼ é€’æœ‰ç”¨çš„ä¿¡æ¯ç»™æ ¹ï¼Œå®Œåæ ¹å¾—å‡ºæœ€ä¼˜è§£çš„è¿‡ç¨‹ã€‚è¿™ç±»çš„ä¹ é¢˜æ¯”è¾ƒçš„å¤šã€‚

hdu1520
æœ€å¤§ç‹¬ç«‹é›†


#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;vector&amp;gt;
using namespace std;
const int N=6000+10;
int val[N],dp[N][2],fa[N],n;
vector&amp;lt;int&amp;gt;E[N];

void dfs(int u){
	dp[u][0]=0;
	dp[u][1]=val[u];
	for(int i=0;i&amp;lt;E[u].size();i++){
		int v=E[u][i];
		dfs(v);
		dp[u][0]+=max(dp[v][1],dp[v][0]);
		dp[u][1]+=dp[v][0];
	}
}

int main(){
	while(~scanf(&amp;quot;%d&amp;quot;,&amp;amp;n)){
		for(int i=1;i&amp;lt;=n;i++){
			scanf(&amp;quot;%d&amp;quot;,&amp;amp;val[i]);
			E[i].clear();
			fa[i]=-1;
		}
		while(1){
			int a,b;
			scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;a,&amp;amp;b);
	        if(a==0&amp;amp;&amp;amp;b==0) break;
	        E[b].push_back(a);
	        fa[a]=b;
		}
	    int rt=1;
	    while(fa[rt]!=-1) rt=fa[rt];
	    dfs(rt);
	    printf(&amp;quot;%d\n&amp;quot;,max(dp[rt][1],dp[rt][0]));
    }
    return 0;
}

poj3398
æœ€å°æ”¯é…é›†
   
#include&amp;lt;cstdio&amp;gt; 
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;vector&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
const int maxn=10010;
int n;
vector&amp;lt;int&amp;gt; E[maxn];
int dp[maxn][3];

void dfs(int u,int fa)
{
    dp[u][0]=1; //åŠ ä¸Šè‡ªèº«ä¸ºæœåŠ¡å™¨,é€‰æ‹©å½“å‰ç»“ç‚¹ 
    dp[u][1]=0;//ä¸é€‰å½“å‰ç»“ç‚¹ï¼Œé€‰å…¶çˆ¶èŠ‚ç‚¹ 
    dp[u][2]=maxn;//é€‰ä¸€ä¸ªå­èŠ‚ç‚¹ 
    int k=E[u].size();
    for(int i=0;i&amp;lt;k;i++)
    {
        int v=E[u][i];
        if(v==fa) continue;
        dfs(v,u);
        dp[u][0]+=min(dp[v][0],dp[v][1]);
        dp[u][1]+=dp[v][2];
    }
    for(int i=0;i&amp;lt;k;i++)
    {
        int v=E[u][i];
        if(v==fa)  continue;
        dp[u][2]=min(dp[u][2],dp[u][1]-dp[v][2]+dp[v][0]);
    }
}

int main()
{
    int u,v;
    while(scanf(&amp;quot;%d&amp;quot;,&amp;amp;n))
    {
        for(int i=1;i&amp;lt;=n;i++)
            E[i].clear();
        for(int i=1;i&amp;lt;n;i++)
        {
            scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;u,&amp;amp;v);
            E[u].push_back(v);
            E[v].push_back(u);
        }
        dfs(1,0);
		printf(&amp;quot;%d\n&amp;quot;,min(dp[1][0],dp[1][2])); 
		int t;
		scanf(&amp;quot;%d&amp;quot;,&amp;amp;t);
		if(t == -1)
			break;
    }
    return 0;
}

acwing1077
é¢˜ç›®è¯´çš„å¾ˆæ¸…æ¥šï¼Œç”¨æœ€å°‘çš„ç‚¹è¦†ç›–æ‰€æœ‰çš„ç‚¹ã€‚é¢˜ç›®ç»™å‡ºçš„æ˜¯ä¸ªæ ‘,æ‰€ä»¥å¯ä»¥ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³ã€‚
ç»™å‡ºå¦‚ä¸‹å®šä¹‰ï¼š
f[u][0]è¡¨ç¤º uä¸æ”¾çœ‹å®ˆ ,ä¸”uç‚¹è¢«çˆ¶èŠ‚ç‚¹ç›‘è§†,
æ˜“å¾—åœ¨è¿™ç±»æƒ…å†µä¸‹å­èŠ‚ç‚¹å¯ä»¥è‡ªå·±æ”¾å®ˆå«æˆ–è€…åœ¨å­èŠ‚ç‚¹ä¸Šæ”¾å®ˆå«ã€‚
ç”±äºæœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œä¸ºä½¿å¾—æ‰€æœ‰å­èŠ‚ç‚¹éƒ½è¢«çœ‹å®ˆï¼Œ
æ‰€ä»¥æ¯ä¸ªèŠ‚ç‚¹çš„æœ€å°å€¼ç´¯åŠ æ±‚å’Œ
f[u][0] = âˆ‘(min(f[j][1] , f[j][2]))
f[u][2]è¡¨ç¤ºuæ”¾çœ‹å®ˆ,
æ—¢ç„¶uå·²ç»æ”¾ä¸Šäº†çœ‹å®ˆï¼Œè¯´æ˜å­èŠ‚ç‚¹å¿…ç„¶å·²ç»è¢«çœ‹åˆ°ï¼Œ
å› æ­¤å¯¹äºæ‰€æœ‰å­èŠ‚ç‚¹å¯è‡ªå·±æ”¾å®ˆå«ï¼Œå¯è¢«çˆ¶èŠ‚ç‚¹ç›‘è§†ï¼Œå¯è¢«å­èŠ‚ç‚¹ç›‘è§†
f[u][2] = âˆ‘min(min(f[j][0],f[j][1]),f[j][2])+w[u]
f[u][1]è¡¨ç¤º uä¸æ”¾çœ‹å®ˆ ,ä¸”uç‚¹è¢«ä¸€ä¸ªå„¿å­ç›‘è§†,
é¦–å…ˆæˆ‘ä»¬å¯ä»¥æšä¸¾å½“å‰å“ªä¸€é¢—å­ç»“ç‚¹ç›‘è§†uï¼Œå…¶ä½™èŠ‚ç‚¹å¯è‡ªå·±æ”¾å®ˆå«æˆ–åœ¨å­èŠ‚ç‚¹æ”¾å®ˆå«ï¼Œ
f[u][1]=min(f[u][1],f[j][2]+âˆ‘min(f[k][2],f[k][1])),jä¸ºå½“å‰ç›‘è§†uçš„ç»“ç‚¹ï¼Œkä¸ºé™¤äº†jä¹‹å¤–uå…¶ä»–çš„å­èŠ‚ç‚¹
è€Œf[u][0]=âˆ‘(min(f[j][1] , f[j][2]))
åˆ™f[u][1]=min(f[u][1],f[j][2]+f[u][0] - min(f[j][2],f[j][1]))
#include &amp;lt;cstring&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;algorithm&amp;gt;

using namespace std;

const int N = 1510;

int n;
int h[N], w[N], e[N], ne[N], idx;
int f[N][3];
int fa[N];

void add(int a, int b)
{
    e[idx] = b, ne[idx] = h[a], h[a] = idx ++ ;
}

void dfs(int u)
{
    f[u][2] = w[u];

    for (int i = h[u]; ~i; i = ne[i])
    {
        int j = e[i];
        dfs(j);
        f[u][0] += min(f[j][1], f[j][2]);
        f[u][2] += min(min(f[j][0], f[j][1]), f[j][2]);
    }

    f[u][1] = 1e9;
    for (int i = h[u]; ~i; i = ne[i])
    {
        int j = e[i];
        f[u][1] = min(f[u][1], f[u][0] + f[j][2] - min(f[j][1], f[j][2]));
    }
}

int main()
{
    cin &amp;gt;&amp;gt; n;

    memset(h, -1, sizeof h);
    memset(fa,-1,sizeof fa);
    for (int i = 1; i &amp;lt;= n; i ++ )
    {
        int id, cost, cnt;
        cin &amp;gt;&amp;gt; id &amp;gt;&amp;gt; cost &amp;gt;&amp;gt; cnt;
        w[id] = cost;
        while (cnt -- )
        {
            int ver;
            cin &amp;gt;&amp;gt; ver;
            add(id, ver);
            fa[ver]=id;
        }
    }

    int root = 1;
    while (fa[root] != -1) root =fa[root] ;

    dfs(root);

    cout &amp;lt;&amp;lt; min(f[root][1], f[root][2]) &amp;lt;&amp;lt; endl;

    return 0;
}

hdu2412
æœ€å¤§ç‹¬ç«‹é›†+å”¯ä¸€æ€§åˆ¤æ–­




#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;string&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;map&amp;gt;
#include&amp;lt;vector&amp;gt;
using namespace std;
const int N=200+10;
int dp[N][2],f[N][2],n;
vector&amp;lt;int&amp;gt;E[N];

void dfs(int u){
   	dp[u][0]=0;
	dp[u][1]=1;
	for(int i=0;i&amp;lt;E[u].size();i++){
		int v=E[u][i];
		dfs(v);
		if(dp[v][0]==dp[v][1]){
			dp[u][0]+=dp[v][0];
			f[u][0]=0;
		}else if(dp[v][0]&amp;gt;dp[v][1]){
			dp[u][0]+=dp[v][0];
			if(!f[v][0]) f[u][0]=0;
		}
		else{
			dp[u][0]+=dp[v][1];
			if(!f[v][1]) f[u][0]=0;
		}
		dp[u][1]+=dp[v][0];
		if(!f[v][0]) f[u][1]=0;
	}
}

int main(){
	int n,k;
	string s1,s2;
	map&amp;lt;string,int&amp;gt;mp;
	while(cin&amp;gt;&amp;gt;n&amp;amp;&amp;amp;n){//nä¸º0æ—¶ç»“æŸ 
		mp.clear();
		for(int i=0;i&amp;lt;=n;i++)//å°½é‡ä¸è¦ä½¿ç”¨memsetæ¸…0çš„åŠæ³•ï¼Œå°½ç®¡ä¹Ÿå¯ä»¥ç”¨ 
			E[i].clear();
		memset(f,1,sizeof(f));
		k=1;
		cin&amp;gt;&amp;gt;s1;
		mp[s1]=k++;
		E[0].push_back(mp[s1]);//å¢åŠ è¶…æ ¹ 
		for(int i=1;i&amp;lt;=n-1;i++){
			cin&amp;gt;&amp;gt;s1&amp;gt;&amp;gt;s2;
			if(mp[s1]==0)
				mp[s1]=k++;
			if(mp[s2]==0)
				mp[s2]=k++;
			E[mp[s2]].push_back(mp[s1]);
		}
	    dfs(0);
	    printf(&amp;quot;%d &amp;quot;,dp[0][0]);
	    if(f[0][0])
	    	printf(&amp;quot;Yes\n&amp;quot;);
		else
			printf(&amp;quot;No\n&amp;quot;);	
    }
    return 0;
}

poj1463


#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;vector&amp;gt;
using namespace std;
const int N=1500+10;
int val[N],dp[N][2],fa[N],n;
vector&amp;lt;int&amp;gt;E[N];

void dfs(int u){
	dp[u][0]=0;
	dp[u][1]=1;
	for(int i=0;i&amp;lt;E[u].size();i++){
		int v=E[u][i];
		dfs(v);
		dp[u][1]+=min(dp[v][1],dp[v][0]);
		dp[u][0]+=dp[v][1];
	}
}

int main(){
	while(~scanf(&amp;quot;%d&amp;quot;,&amp;amp;n)){
		for(int i=0;i&amp;lt;n;i++)//ç¼–å·ä»0å¼€å§‹ 
			E[i].clear();
		memset(fa,-1,sizeof(fa));
		memset(dp,0,sizeof(dp));
		for(int i=0;i&amp;lt;n;i++){
			int a,b,m;
			scanf(&amp;quot;%d:(%d)&amp;quot;,&amp;amp;a,&amp;amp;m);//æ³¨æ„è¯»å…¥ 
	        while(m--)
	        {
	        	scanf(&amp;quot;%d&amp;quot;,&amp;amp;b);
	        	E[a].push_back(b);
	        	fa[b]=a;
			}
		}
	    int rt=0;//ç¼–å·ä»0å¼€å§‹
	    while(fa[rt]!=-1) rt=fa[rt];
	    dfs(rt);
	    printf(&amp;quot;%d\n&amp;quot;,min(dp[rt][1],dp[rt][0]));
    }
    return 0;
}

èƒŒåŒ…ç±»æ ‘å½¢dp
hdu1561



åŠ ä¸Šè™šæ ¹ä¸€å…±m+1ä¸ªç»“ç‚¹
#include &amp;lt;cstring&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;algorithm&amp;gt;

using namespace std;

const int N = 210,M=N*2;
int n, m;
int w[N];
int h[N], e[M], ne[M], idx;
int f[N][N];

void add(int a, int b)
{
    e[idx] = b, ne[idx] = h[a], h[a] = idx ++ ;
}

void dfs(int u)
{
    for (int i = h[u]; ~i; i = ne[i])
    {
        int son=e[i];
        dfs(son);
        for (int j = m ; j &amp;gt;= 0; j -- )
            for (int k = 0; k &amp;lt;= j; k ++ )
                f[u][j] = max(f[u][j], f[u][j - k] + f[son][k]);
    }

    for (int j = m+1; j &amp;gt;= 1; j -- ) f[u][j] = f[u][j - 1] + w[u];
    for (int j = 0; j &amp;lt; 1; j ++ ) f[u][j] = 0;
}

int main()
{
    while(cin &amp;gt;&amp;gt; n &amp;gt;&amp;gt; m &amp;amp;&amp;amp; n)
    {
    	memset(h, -1, sizeof h);
    	memset(f,0,sizeof f);
    	idx=0;
	    for (int i = 1; i &amp;lt;= n; i ++ )
	    {
	    	int a,b;
	    	cin&amp;gt;&amp;gt;a&amp;gt;&amp;gt;b;
	    	if(!a)
	    		add(0,i);
	    	else 
	    		add(a,i);
	    	w[i]=b;
	    }
	
	    dfs(0);
	
	    cout &amp;lt;&amp;lt; f[0][m+1]&amp;lt;&amp;lt; endl;
	}

    return 0;
}

acwing286
åŒèƒŒåŒ…ç±»æ ‘å½¢dp
#include &amp;lt;cstring&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;algorithm&amp;gt;

using namespace std;

const int N = 310;

int n, m;
int h[N], e[N], ne[N], idx;
int w[N];
int f[N][N];

void add(int a, int b)
{
    e[idx] = b, ne[idx] = h[a], h[a] = idx ++ ;
}

void dfs(int u)
{
    for (int i = h[u]; ~i; i = ne[i])
    {
        int son = e[i];
        dfs(son);

        for (int j = m - 1; j &amp;gt;= 0; j -- )
            for (int k = 0; k &amp;lt;= j; k ++ )
                f[u][j] = max(f[u][j], f[u][j - k] + f[son][k]);
    }

    for (int i = m; i&amp;gt;=1; i -- ) f[u][i] = f[u][i - 1] + w[u];
    for(int i=0;i&amp;lt;1;i++) f[u][i]=0;
}

int main()
{
    cin &amp;gt;&amp;gt; n &amp;gt;&amp;gt; m;

    memset(h, -1, sizeof h);
    for (int i = 1; i &amp;lt;= n; i ++ )
    {
        int p;
        cin &amp;gt;&amp;gt; p &amp;gt;&amp;gt; w[i];
        add(p, i);
    }

    m ++ ;
    dfs(0);

    cout &amp;lt;&amp;lt; f[0][m] &amp;lt;&amp;lt; endl;

    return 0;
}

acwing1075
å¦‚æœxå’Œyå¯ä»¥äº’ç›¸è½¬åŒ–ï¼Œå°±è¿æ¥ä¸€æ¡æ— å‘è¾¹ï¼Œæœ€åå¾—åˆ°çš„å›¾å…¶å®æ˜¯ä¸€ä¸ªæ£®æ—ï¼Œæ¯æ£µæ ‘éƒ½æ˜¯æ— æ ¹æ ‘ï¼Œå…¶å®å°±æ˜¯è¦æ±‚ï¼Œæ•´ä¸ªæ£®æ—ä¸­ä¸¤ä¸ªè¿é€šçš„ç‚¹çš„æœ€è¿œè·ç¦»ï¼ˆè¿™é‡Œè¾¹æƒéƒ½æ˜¯1ï¼‰ï¼Œå’Œåœ¨æ— æ ¹æ ‘ä¸­æ±‚ä¸¤ç‚¹æœ€è¿œè·ç¦»æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡è¿™é¢˜çš„ç‰¹æ®Šæ€§ï¼Œå¯ä»¥æ›´æ–¹ä¾¿ç‚¹
å¯¹äºä»»æ„ä¸€æ¡è¾¹ï¼Œå¿…æœ‰x&amp;lt;yï¼Œåœ¨æ ‘ä¸­ï¼Œxå°±åº”è¯¥ä¸ºyçš„åŒäº²ï¼ˆå› ä¸ºyçš„çº¦æ•°å’Œæ˜¯å”¯ä¸€çš„ï¼Œä½†xå¯èƒ½æ˜¯å¾ˆå¤šä¸ªæ•°çš„çº¦æ•°å’Œï¼Œè¿™æ­£å¥½å¯¹åº”æ ‘çš„å…³ç³»ï¼ŒåŒäº²å”¯ä¸€ï¼Œå­©å­ä¸å®šï¼‰ã€‚è€Œdpæ€æƒ³ç…§æ ·æ˜¯æ‰¾å‡ºæ¯ä¸ªèŠ‚ç‚¹åˆ°å¶å­çš„æœ€å¤§å€¼m1å’Œæ¬¡å¤§å€¼m2ï¼Œå†ä¸¤è€…ç›¸åŠ çš„dp[rt]ï¼Œè€Œæ•´ä¸ªæ ‘ä¸­çš„æœ€å¤§å€¼ï¼Œå°±æ˜¯æ‰«æå…¨éƒ¨èŠ‚ç‚¹ï¼Œæ‰¾åˆ°æœ€å¤§çš„dp[rt]
ç”±äºè¿™é¢˜ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„åŒäº²æ˜¯å¯ä»¥è®°å½•ä¸‹æ¥çš„ï¼Œæ‰€ä»¥dpçš„æ—¶å€™ä¸ç”¨é€’å½’ï¼Œè€Œå†™æˆé€’æ¨å¼ï¼Œç›´æ¥ä»å¶å¾€ä¸Šé€’æ¨ï¼Œ
è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æ—¶å€™å°±æ˜¯æ€ä¹ˆæ‰¾å‡ºçº¦æ•°å’Œï¼Œæ•°æ®æ¯”è¾ƒå¤§ï¼Œåº”è¯¥å°½é‡é¿å…å¤šä½™çš„åˆ¤æ–­ï¼Œç”¨ç­›æ³•æ±‚çº¦æ•°å’Œåˆ™æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹æ³•
#include&amp;lt;bits/stdc++.h&amp;gt;
using namespace std;
int n;
const int N=50010;
int f[N][2];
int sum[N];
 
int main()
{
   cin&amp;gt;&amp;gt;n;
   
   for(int i=1;i&amp;lt;=n;i++)
		for(int j=2*i;j&amp;lt;=n;j+=i)//æ±‚çº¦æ•°å’Œ 
			sum[j]+=i;
	
	for(int i=n;i&amp;gt;=1;i--)
	{
		if(sum[i]&amp;lt;i)//åˆ¤æ–­æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œæ³¨æ„å®¡é¢˜ã€‚
		{
			if(f[i][0]+1&amp;gt;f[sum[i]][0])
			{
				f[sum[i]][1]=f[sum[i]][0];
				f[sum[i]][0]=f[i][0]+1;
			}
			else if(f[i][0]+1&amp;gt;f[sum[i]][1])
				f[sum[i]][1]=f[i][0]+1;
		} 
	}
	int ans=0;
	for(int i=1;i&amp;lt;=n;i++)
		ans=max(f[i][0]+f[i][1],ans);
	cout&amp;lt;&amp;lt;ans&amp;lt;&amp;lt;endl;
	
   return 0;
}

acwing1074


#include &amp;lt;cstring&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;algorithm&amp;gt;

using namespace std;

const int N = 110, M = N * 2;

int n, m;
int h[N], e[M], w[M], ne[M], idx;
int f[N][N];

void add(int a, int b, int c)
{
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx ++ ;
}

void dfs(int u, int father)
{
    for (int i = h[u]; ~i; i = ne[i])
    {
        if (e[i] == father) continue;
        dfs(e[i], u);
        for (int j = m; j&amp;gt;=0; j -- )
            for (int k = 0; k &amp;lt; j; k ++ )
                f[u][j] = max(f[u][j], f[u][j - k - 1] + f[e[i]][k] + w[i]);
    }
}

int main()
{
    cin &amp;gt;&amp;gt; n &amp;gt;&amp;gt; m;
    memset(h, -1, sizeof h);
    for (int i = 0; i &amp;lt; n - 1; i ++ )
    {
        int a, b, c;
        scanf(&amp;quot;%d%d%d&amp;quot;, &amp;amp;a, &amp;amp;b, &amp;amp;c);
        add(a, b, c), add(b, a, c);
    }

    dfs(1, -1);

    printf(&amp;quot;%d\n&amp;quot;, f[1][m]);

    return 0;
}

å·¦å„¿å­å³å…„å¼Ÿ
POJ2486
é¢˜ç›®å¤§æ„ï¼šä¸€ä¸ªå«Wshxztçš„å¯çˆ±çš„å¥³å­©å­è¢«HXå¤§å”å¸¦åˆ°äº†ä¸€æ£µè‹¹æœæ ‘è¾¹ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œè‹¹
æœæ ‘æ˜¯ä¸€ä¸ªæ ‘å½¢çš„ç»“æ„ï¼Œåœ¨èŠ‚ç‚¹å¤„é•¿æœ‰è‹¹æœï¼‰ã€‚ç°åœ¨æˆ‘ä»¬çŸ¥é“Wshxztæ˜¯ä¸ªè‹¹æœæ§ï¼Œå¥¹åªè¦è®¿é—®åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±ä¸€å®šä¼šåƒå…‰è¿™ä¸ªèŠ‚ç‚¹æ‰€æœ‰çš„è‹¹æœã€‚å½“ç„¶ä¸€ä¸ªèŠ‚ç‚¹çš„è‹¹æœåªèƒ½åƒä¸€æ¬¡ã€‚HXå¤§å”ä¸ºäº†é˜²æ­¢Wshxzté•¿èƒ–ï¼Œé™åˆ¶å¥¹åªèƒ½èµ°Kï¼ˆ1 â‰¤ K â‰¤ 200ï¼‰æ­¥ï¼Œä»ä¸€ä¸ªèŠ‚ç‚¹èµ°åˆ°å¦
ä¸€ä¸ªç›¸é‚»çš„èŠ‚ç‚¹æ˜¯æ‰€è°“èµ°ä¸€æ­¥ã€‚Wshxztä»èŠ‚ç‚¹1å¼€å§‹ã€‚æ ‘ä¸Šçš„èŠ‚ç‚¹æœ‰Nï¼ˆ1 â‰¤ N â‰¤ 100ï¼‰
ä¸ªï¼Œä½ éœ€è¦è®¡ç®—Wshxztæœ€å¤šèƒ½åƒåˆ°å¤šå°‘è‹¹æœã€‚




#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;algorithm&amp;gt;
using namespace std;
const int N=110,M=N*2;
int n,m,cnt;
//dp[u][j][0]è¡¨ç¤ºä»¥uä¸ºæ ¹çš„æ ‘ç»è¿‡jæ­¥æ²¡æœ‰å›åˆ°ç‚¹uå¾—åˆ°çš„æœ€å€¼
//dp[u][j][1]è¡¨ç¤ºä»¥uä¸ºæ ¹çš„æ ‘ç»è¿‡jæ­¥å›åˆ°ç‚¹uå¾—åˆ°çš„æœ€å€¼ 
int dp[N][M][2],val[N],head[N];
 
struct edge{
	int v,next;
}e[M];
 
void init(){
	memset(head,-1,sizeof(head));
	memset(dp,0,sizeof(dp));
	cnt=0;
}
 
void add(int u,int v){
	e[cnt].v=v;
	e[cnt].next=head[u];
	head[u]=cnt++;
}
 
void dfs(int u,int fa){
	for(int i=0;i&amp;lt;=m;i++)//ä¸è®ºèµ°å¤šå°‘æ­¥ï¼Œå‡åˆå§‹åŒ–ä¸º 
		dp[u][i][0]=dp[u][i][1]=val[u];
	for(int i=head[u];~i;i=e[i].next){
		int v=e[i].v;
		if(v==fa) continue;
		dfs(v,u);
		for(int j=m;j&amp;gt;=1;j--){//æ ‘å½¢èƒŒåŒ… 
			for(int k=1;k&amp;lt;=j;k++){
				dp[u][j][0]=max(dp[u][j][0],dp[u][j-k][1]+dp[v][k-1][0]);
				if(k&amp;gt;=2) dp[u][j][0]=max(dp[u][j][0],dp[u][j-k][0]+dp[v][k-2][1]);
				if(k&amp;gt;=2) dp[u][j][1]=max(dp[u][j][1],dp[u][j-k][1]+dp[v][k-2][1]);
			}
		}
	}
}
 
int main(){
	int u,v;
	while(~scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;n,&amp;amp;m)){
		init();
		for(int i=1;i&amp;lt;=n;++i)
			scanf(&amp;quot;%d&amp;quot;,&amp;amp;val[i]);
		for(int i=1;i&amp;lt;n;++i){
			scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;u,&amp;amp;v);
			add(u,v);
			add(v,u);
		}
		dfs(1,-1);
		printf(&amp;quot;%d\n&amp;quot;,max(dp[1][m][0],dp[1][m][1]));
	}
	return 0;
}

uva12186
ä¸€ä¸ªè€æ¿å’Œnä¸ªå‘˜å·¥ç»„æˆæ ‘çŠ¶ç»“æ„ï¼Œæ¯ä¸ªå‘˜å·¥éƒ½æœ‰è‡ªå·±çš„å”¯ä¸€ä¸Šå¸ï¼Œè€æ¿çš„ç¼–å·ä¸º0ï¼Œå‘˜å·¥1~nï¼Œå·¥äººä»¬æ‰“ç®—ç­¾ç½²ä¸€ä¸ªå¿—æ„¿ä¹¦ç»™è€æ¿ï¼Œä½†æ— æ³•è·¨çº§ï¼Œå½“ä¸€ä¸ªä¸­çº§å‘˜å·¥ï¼ˆéæ˜¯å·¥äººçš„å‘˜å·¥ï¼‰çš„ç›´å±ä¸‹å±ä¸­ä¸å°äºT%çš„äººç­¾å­—æ—¶ï¼Œä»–ä¹Ÿä¼šç­¾å­—å¹¶ä¸”é€’ç»™ä»–çš„ç›´å±ä¸Šå¸ï¼Œé—®ï¼šè¦è®©è€æ¿æ”¶åˆ°è¯·æ„¿ä¹¦è‡³å°‘éœ€è¦å¤šå°‘ä¸ªå·¥äººç­¾å­—ã€‚
æ³¨æ„ï¼šè¿™é‡Œè¦æ±‚çš„æ˜¯æœ€åº•å±‚å·¥äººï¼ˆå³å¶å­ç»“ç‚¹ï¼‰çš„æœ€å°‘ä¸ªæ•°ã€‚


#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;vector&amp;gt;
#include&amp;lt;iostream&amp;gt;

using namespace std;
const int N=100010;
vector&amp;lt;int&amp;gt; E[N];
int n,T;

int dfs(int u)
{
	if(E[u].size() == 0)
		return 1;
	vector&amp;lt;int&amp;gt; res;
    for(int i=0;i&amp;lt;E[u].size();i++)
    {
    	int j=E[u][i];
    	int t=dfs(j);
    	res.push_back(t);
	}
	
	sort(res.begin(),res.end());
	int k=E[u].size();
	int c=(k*T-1)/100+1;
	int ans=0;
	for(int i=0;i&amp;lt;c;i++)
		ans+=res[i];

	return ans;
}

int main()
{
    while(~scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;n,&amp;amp;T)&amp;amp;&amp;amp;n){
        for(int i=0;i&amp;lt;=n;i++)
			E[i].clear();
        for(int i=1;i&amp;lt;=n;i++)
        {
            int u;
            scanf(&amp;quot;%d&amp;quot;,&amp;amp;u);
            E[u].push_back(i);
        }
        printf(&amp;quot;%d\n&amp;quot;,dfs(0));
    }
    return 0;
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://caifxh.github.io/post/shu-xing-dp/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://caifxh.github.io/post/lca/">
                        LCA
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-04-06</time>
                    
                        <a href="https://caifxh.github.io/tag/Aq1uYaqZQ/" class="post-tag i-tag
                            i-tag-success">
            #å›¾è®º
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            



æš´åŠ›



poj1330

#include&amp;lt;cstdio&amp;gt;
using namespace std;
const int maxn=10010;
int fa[maxn];
bool flag[maxn];

int LCA(int u,int v)
{
    if(u==v)
    	return u;
	flag[u]=1;
	while(fa[u]!=u)//uå‘ä¸Šèµ°åˆ°æ ¹ 
	{
		u=fa[u];
		flag[u]=1;
	}
	if(flag[v]) 
		return v;
	while(fa[v]!=v)//vå‘ä¸Šèµ°
	{
		v=fa[v];
		if(flag[v])
			return v;
	}
	return 0;   	
}

int main()
{
	int n,u,v,T;
	scanf(&amp;quot;%d&amp;quot;,&amp;amp;T);
	while(T--)
	{
		scanf(&amp;quot;%d&amp;quot;,&amp;amp;n);
		for(int i=1;i&amp;lt;=n;i++)
		{
			fa[i]=i;
			flag[i]=0;
		} 
		for(int i=1;i&amp;lt;n;i++)
		{
			scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;u,&amp;amp;v);
			fa[v]=u;
		}
		scanf(&amp;quot;%d%d&amp;quot;,&amp;amp;u,&amp;amp;v);
		printf(&amp;quot;%d\n&amp;quot;,LCA(u,v));
	}
	return 0;
}

æ ‘ä¸Šå€å¢
ç”¨æ ‘ä¸Šå€å¢æ³•æ±‚LCAçš„æ—¶é—´å¤æ‚åº¦ä¸ºO((n+m)logn)ã€‚








æ­¥éª¤
1.å»ºç«‹ä¸€ä¸ªç©ºé˜Ÿåˆ—ï¼Œå¹¶å°†æ ¹èŠ‚ç‚¹å…¥é˜Ÿï¼ŒåŒæ—¶å­˜å‚¨æ ¹èŠ‚ç‚¹çš„æ·±åº¦
2.å–å‡ºé˜Ÿå¤´ï¼Œéå†å…¶æ‰€æœ‰å‡ºè¾¹ã€‚ç”±äºå­˜å‚¨çš„æ—¶å€™æ˜¯æŒ‰ç…§æ— å‘å›¾å­˜å‚¨ï¼Œå› æ­¤è¦è¿›è¡Œæ·±åº¦åˆ¤å®šï¼Œå¯¹äºè¿æ¥åˆ°å®ƒçˆ¶äº²èŠ‚ç‚¹çš„è¾¹ï¼Œç›´æ¥continueå³å¯ã€‚è®°å½“å‰è·¯å¾„çš„å¦ä¸€ç«¯èŠ‚ç‚¹ä¸ºyï¼Œå¤„ç†å‡ºyçš„dã€fä¸¤ä¸ªæ•°ç»„çš„å€¼ï¼Œç„¶åå°†yå…¥é˜Ÿã€‚
3.é‡å¤ç¬¬2æ­¥ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º
ä»¥ä¸Šéƒ¨åˆ†æ˜¯æ ‘ä¸Šå€å¢æ³•çš„é¢„å¤„ç†ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒé€šç”¨çš„å¯¹äºæ ‘ä¸Šå€å¢çš„é¢„å¤„ç†ï¼Œæ—¶é—´å¤æ‚åº¦O(nlogn)
ã€‚æ¥ä¸‹æ¥æ˜¯æ±‚LCAçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚

acwing1172
#include &amp;lt;cstdio&amp;gt;
#include &amp;lt;cstring&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;algorithm&amp;gt;

using namespace std;

const int N = 40010, M = N * 2;

int n, m;
int h[N], e[M], ne[M], idx;
int depth[N], fa[N][16];
int q[N];

void add(int a, int b)
{
    e[idx] = b, ne[idx] = h[a], h[a] = idx ++ ;
}

void bfs(int root)
{
    memset(depth, 0x3f, sizeof depth);
    depth[0] = 0, depth[root] = 1;
    int hh = 0, tt = 0;
    q[0] = root;
    while (hh &amp;lt;= tt)
    {
        int t = q[hh ++ ];
        for (int i = h[t]; ~i; i = ne[i])
        {
            int j = e[i];
            if (depth[j] &amp;gt; depth[t] + 1)
            {
                depth[j] = depth[t] + 1;
                q[ ++ tt] = j;
                fa[j][0] = t;
                for (int k = 1; k &amp;lt;= 15; k ++ )
                    fa[j][k] = fa[fa[j][k - 1]][k - 1];
            }
        }
    }
}

int lca(int a, int b)
{
    if (depth[a] &amp;lt; depth[b]) swap(a, b);
    for (int k = 15; k &amp;gt;= 0; k -- )
        if (depth[fa[a][k]] &amp;gt;= depth[b])
            a = fa[a][k];
    if (a == b) return a;
    for (int k = 15; k &amp;gt;= 0; k -- )
        if (fa[a][k] != fa[b][k])
        {
            a = fa[a][k];
            b = fa[b][k];
        }
    return fa[a][0];
}

int main()
{
    scanf(&amp;quot;%d&amp;quot;, &amp;amp;n);
    int root = 0;
    memset(h, -1, sizeof h);

    for (int i = 0; i &amp;lt; n; i ++ )
    {
        int a, b;
        scanf(&amp;quot;%d%d&amp;quot;, &amp;amp;a, &amp;amp;b);
        if (b == -1) root = a;
        else add(a, b), add(b, a);
    }

    bfs(root);

    scanf(&amp;quot;%d&amp;quot;, &amp;amp;m);
    while (m -- )
    {
        int a, b;
        scanf(&amp;quot;%d%d&amp;quot;, &amp;amp;a, &amp;amp;b);
        int p = lca(a, b);
        if (p == a) puts(&amp;quot;1&amp;quot;);
        else if (p == b) puts(&amp;quot;2&amp;quot;);
        else puts(&amp;quot;0&amp;quot;);
    }

    return 0;
}

ç¦»çº¿tarjan
Tarjanç®—æ³•æ±‚LCAçš„æœ¬è´¨æ˜¯ç”¨å¹¶æŸ¥é›†å¯¹å‘ä¸Šæ ‡è®°æ³•è¿›è¡Œä¼˜åŒ–ï¼Œæ˜¯ä¸€ç§ç¦»çº¿ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦O(n+m)ã€‚
åœ¨æ·±åº¦ä¼˜å…ˆéå†çš„ä»»æ„æ—¶åˆ»ï¼Œæ ‘ä¸­ç»“ç‚¹åˆ†ä¸ºä¸‰ç±»ï¼š
1.å·²ç»è®¿é—®å®Œæ¯•å¹¶ä¸”å›æº¯çš„ç»“ç‚¹ï¼Œåœ¨è¿™äº›ç»“ç‚¹ä¸Šæ ‡è®°ä¸€ä¸ªæ•´æ•°2.
2ï¼Œå·²ç»å¼€å§‹é€’å½’ï¼Œä½†å°šæœªå›æº¯çš„ç‚¹ã€‚è¿™äº›ç»“ç‚¹å°±æ˜¯å½“å‰æ­£åœ¨è®¿é—®çš„ç»“ç‚¹ï¼Œxä»¥åŠxçš„ç¥–å…ˆã€‚åœ¨è¿™äº›ç»“ç‚¹ä¸Šæ ‡è®°ä¸€ä¸ªæ•´æ•°1.
3.å°šæœªè®¿é—®çš„ç»©ç‚¹ã€‚è¿™äº›ç»“ç‚¹æ²¡æœ‰æ ‡è®°ã€‚
å¯¹äºæ­£åœ¨è®¿é—®çš„ç»“ç‚¹xï¼Œå®ƒåˆ°æ ¹èŠ‚ç‚¹çš„è·¯åŠ²å·²ç»æ ‡è®°ä¸º1.è‹¥yæ˜¯å·²ç»è®¿é—®å®Œæ¯•å¹¶ä¸”å›æº¯çš„èŠ‚ç‚¹ï¼Œåˆ™LCAï¼ˆxï¼Œyï¼‰å°±æ˜¯ä»yå‘ä¸Šèµ°åˆ°æ ¹ï¼Œç¬¬ä¸€ä¸ªé‡åˆ°çš„æ ‡è®°ä¸º1çš„èŠ‚ç‚¹ã€‚
å¯ä»¥åˆ©ç”¨å¹¶æŸ¥é›†è¿›è¡Œä¼˜åŒ–ï¼Œå½“ä¸€ä¸ªç»“ç‚¹è·å¾—æ•´æ•°2çš„æ ‡è®°æ—¶ï¼ŒæŠŠå®ƒæ‰€åœ¨çš„é›†åˆåˆå¹¶åˆ°å®ƒçš„çˆ¶èŠ‚ç‚¹æ‰€åœ¨çš„é›†åˆä¸­ï¼ˆåˆå¹¶æ—¶å®ƒçš„çˆ¶èŠ‚ç‚¹æ ‡è®°ä¸€å®šä¸º1ï¼Œä¸”å•ç‹¬æ„æˆä¸€ä¸ªé›†åˆï¼‰ã€‚
æ­¤æ—¶æ‰«æä¸xç›¸å…³çš„æ‰€æœ‰è¯¢é—®ï¼Œè‹¥è¯¢é—®çš„å¦ä¸€ä¸ªç‚¹yçš„æ ‡è®°ä¸º2ï¼Œå°±çŸ¥é“lè¯¥å­™æ–‡çš„å›ç­”åº”è¯¥æ˜¯yæ‰€åœ¨å¹¶æŸ¥é›†ä¸­çš„ä»£è¡¨å…ƒç´ ã€‚
è¿™æ ·ï¼ŒTarjanç®—æ³•æ±‚LCAçš„æ­¥éª¤å°±å¾ˆæ˜äº†äº†ï¼š
1.ä»æ ¹èŠ‚ç‚¹å¼€å§‹è¿›è¡Œdfs
2.å°†å½“å‰èŠ‚ç‚¹æ ‡è®°ä¸º1
3.éå†å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å‡ºè¾¹ï¼›è‹¥å½“å‰è¾¹çš„ç»ˆç‚¹è¿˜æ²¡æœ‰è®¿é—®è¿‡ï¼Œåˆ™è®¿é—®å®ƒï¼Œè®¿é—®è¿‡åå°†è¯¥èŠ‚ç‚¹åˆå¹¶åˆ°å½“å‰èŠ‚ç‚¹çš„é›†åˆä¸­ï¼›
4.éå†ä¸å½“å‰èŠ‚ç‚¹ç›¸å…³çš„æ‰€æœ‰è¯¢é—®ï¼›è‹¥å½“å‰è¯¢é—®çš„å¦ä¸€ä¸ªèŠ‚ç‚¹çš„æ ‡è®°ä¸º2ï¼Œåˆ™è¯¥è¯¢é—®çš„ç­”æ¡ˆå³ä¸ºå¦ä¸€ä¸ªèŠ‚ç‚¹æ‰€åœ¨é›†åˆçš„ä»£è¡¨å…ƒç´ 
5.å°†å½“å‰èŠ‚ç‚¹æ ‡è®°ä¸º2
acwing1171
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;vector&amp;gt;
using namespace std;
const int N=10010,M=N*2;
int h[N],e[M],ne[M],w[M],idx;
int n,m;
typedef pair&amp;lt;int,int&amp;gt; PII;
#define x firsst
#define y second
vector&amp;lt;PII&amp;gt; query[N];//firstå­˜å‚¨æŸ¥è¯¢çš„å¦å¤–ä¸€ä¸ªç‚¹ï¼Œsecondå­˜æŸ¥è¯¢ç¼–å·
int res[M];
int st[N];
int p[N];
int dist[N];

void add(int a, int b, int c)
{
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx ++ ;
}

int find(int x)
{
    if (p[x] != x) p[x] = find(p[x]);
    return p[x];
}


void dfs(int u,int fa)
{
    for(int i=h[u];~i;i=ne[i])
    {
        int j=e[i];
        if(j == fa)
            continue;
        dist[j]=dist[u]+w[i];
        dfs(j,u);
    }
}

void tarjan(int u)
{
    st[u]=1;
    for(int i=h[u];~i;i=ne[i])
    {
        int j=e[i];
        if(!st[j])
        {
            tarjan(j);
            p[j]=u;
        }
    }
    
    for(int i=0;i&amp;lt;query[u].size();i++)
    {
        int y=query[u][i].first,id=query[u][i].second;
        if(st[y] == 2)
        {
            int anc=find(y);
            res[id]=dist[u]+dist[y]-dist[anc]*2;
        }
    }
    st[u]=2;
}

int main()
{
    cin&amp;gt;&amp;gt;n&amp;gt;&amp;gt;m;
    memset(h,-1,sizeof h);
    
    for(int i=0;i&amp;lt;n-1;i++)
    {
        int a,b,c;
        cin&amp;gt;&amp;gt;a&amp;gt;&amp;gt;b&amp;gt;&amp;gt;c;
        add(a,b,c);
        add(b,a,c);
    }
    
    for(int i=0;i&amp;lt;m;i++)
    {
        int a,b;
        cin&amp;gt;&amp;gt;a&amp;gt;&amp;gt;b;
        if(a != b)
        {
            query[a].push_back({b,i});
            query[b].push_back({a,i});
        }
    }
    
    for(int i=1;i&amp;lt;=n;i++)
        p[i]=i;
    
    dfs(1,-1);
    
    tarjan(1);
    
    for(int i=0;i&amp;lt;m;i++)
        cout&amp;lt;&amp;lt;res[i]&amp;lt;&amp;lt;endl;
    return 0;
}

lcaæ±‚æ¬¡å°ç”Ÿæˆæ ‘


æˆ‘ä»¬å‡è®¾ä¸€æ¡è·¯å¾„æ˜¯ç”±ä¸‰æ®µæ„é€ è€Œæˆ.æ˜¯ä¸‰æ®µ,ä¸æ˜¯å°±ä¸‰ä¸ªç‚¹.a-&amp;gt;c,c-&amp;gt;b,b-&amp;gt;a(è½¬è‡ªç§¦åŒå­¦é¢˜è§£)




#include &amp;lt;cstdio&amp;gt;
#include &amp;lt;cstring&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;algorithm&amp;gt;

using namespace std;

typedef long long LL;

const int N = 100010, M = 300010, INF = 0x3f3f3f3f;

int n, m;
struct Edge
{
    int a, b, w;
    bool used;
    bool operator&amp;lt; (const Edge &amp;amp;t) const
    {
        return w &amp;lt; t.w;
    }
}edge[M];
int p[N];
int h[N], e[M], w[M], ne[M], idx;
int depth[N], fa[N][17], d1[N][17], d2[N][17];
int q[N];

void add(int a, int b, int c)
{
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx ++ ;
}

int find(int x)
{
    if (p[x] != x) p[x] = find(p[x]);
    return p[x];
}

LL kruskal()
{
    for (int i = 1; i &amp;lt;= n; i ++ ) p[i] = i;
    sort(edge, edge + m);
    LL res = 0;
    for (int i = 0; i &amp;lt; m; i ++ )
    {
        int a = find(edge[i].a), b = find(edge[i].b), w = edge[i].w;
        if (a != b)
        {
            p[a] = b;
            res += w;
            add(edge[i].a, edge[i].b, w), add(edge[i].b, edge[i].a, w);
            edge[i].used=true;
        }
    }

    return res;
}

void bfs()
{
    memset(depth, 0x3f, sizeof depth);
    depth[0] = 0, depth[1] = 1;
    q[0] = 1;
    int hh = 0, tt = 0;
    while (hh &amp;lt;= tt)
    {
        int t = q[hh ++ ];
        for (int i = h[t]; ~i; i = ne[i])
        {
            int j = e[i];
            if (depth[j] &amp;gt; depth[t] + 1)
            {
                depth[j] = depth[t] + 1;
                q[ ++ tt] = j;
                fa[j][0] = t;
                d1[j][0] = w[i], d2[j][0] = -INF;
                for (int k = 1; k &amp;lt;= 16; k ++ )
                {
                    int anc = fa[j][k - 1];
                    fa[j][k] = fa[anc][k - 1];
                    int distance[4] = {d1[j][k - 1], d2[j][k - 1], d1[anc][k - 1], d2[anc][k - 1]};
                    d1[j][k] = d2[j][k] = -INF;
                    for (int u = 0; u &amp;lt; 4; u ++ )
                    {
                        int d = distance[u];
                        if (d &amp;gt; d1[j][k]) d2[j][k] = d1[j][k], d1[j][k] = d;
                        else if (d &amp;lt; d1[j][k] &amp;amp;&amp;amp; d &amp;gt; d2[j][k]) d2[j][k] = d;
                    }
                }
            }
        }
    }
}

int lca(int a, int b, int w)
{
    static int distance[N * 2];
    int cnt = 0;
    if (depth[a] &amp;lt; depth[b]) swap(a, b);
    for (int k = 16; k &amp;gt;= 0; k -- )
        if (depth[fa[a][k]] &amp;gt;= depth[b])
        {
            distance[cnt ++ ] = d1[a][k];
            distance[cnt ++ ] = d2[a][k];
            a = fa[a][k];
        }
    if (a != b)
    {
        for (int k = 16; k &amp;gt;= 0; k -- )
            if (fa[a][k] != fa[b][k])
            {
                distance[cnt ++ ] = d1[a][k];
                distance[cnt ++ ] = d2[a][k];
                distance[cnt ++ ] = d1[b][k];
                distance[cnt ++ ] = d2[b][k];
                a = fa[a][k], b = fa[b][k];
            }
        distance[cnt ++ ] = d1[a][0];
        distance[cnt ++ ] = d1[b][0];
    }

    int dist1 = -INF, dist2 = -INF;
    for (int i = 0; i &amp;lt; cnt; i ++ )
    {
        int d = distance[i];
        if (d &amp;gt; dist1) dist2 = dist1, dist1 = d;
        else if (d &amp;lt; dist1 &amp;amp;&amp;amp; d &amp;gt; dist2) dist2 = d;
    }

    if (w != dist1) 
        return w - dist1;
    return w - dist2;
}

int main()
{
    scanf(&amp;quot;%d%d&amp;quot;, &amp;amp;n, &amp;amp;m);
    memset(h, -1, sizeof h);
    for (int i = 0; i &amp;lt; m; i ++ )
    {
        int a, b, c;
        scanf(&amp;quot;%d%d%d&amp;quot;, &amp;amp;a, &amp;amp;b, &amp;amp;c);
        edge[i] = {a, b, c};
    }

    LL sum = kruskal();
    
    bfs();

    LL res = 1e18;
    for (int i = 0; i &amp;lt; m; i ++ )
        if (!edge[i].used)
        {
            int a = edge[i].a, b = edge[i].b, w = edge[i].w;
            res = min(res, sum + lca(a, b, w));
        }
    printf(&amp;quot;%lld\n&amp;quot;, res);

    return 0;
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://caifxh.github.io/post/lca/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://caifxh.github.io/post/zhuang-tai-ji/">
                        çŠ¶æ€æœº
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-04-05</time>
                    
                        <a href="https://caifxh.github.io/tag/hLQFdtGuD/" class="post-tag i-tag
                            i-tag-">
            #DP
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            acwing1049

ä¸åˆæ³•çŠ¶æ€æŒ‰ç…§é—®é¢˜çš„æ€§è´¨åˆå§‹åŒ–ä¸ºINF(æ±‚æœ€å°å€¼)/-(æ±‚æœ€å¤§å€¼)
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace std;
const int N=100010,INF=0x3f3f3f3f;
int w[N];
int f[N][2];

int main()
{
    int t;
    cin&amp;gt;&amp;gt;t;
    while(t--)
    {
        int n;
        scanf(&amp;quot;%d&amp;quot;,&amp;amp;n);
        for(int i=1;i&amp;lt;=n;i++)
            scanf(&amp;quot;%d&amp;quot;,&amp;amp;w[i]);
        
        f[0][0]=0,f[0][1]=-INF;
        for(int i=1;i&amp;lt;=n;i++)
        {
            f[i][0]=max(f[i-1][0],f[i-1][1]);
            f[i][1]=f[i-1][0]+w[i];
        }
        printf(&amp;quot;%d\n&amp;quot;,max(f[n][0],f[n][1]));
    }
    return 0;
}

acwing1057


#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace std;
const int N=100010,M=110;
int w[N];
int f[N][M][2];

int main()
{
    int n,k;
    cin&amp;gt;&amp;gt;n&amp;gt;&amp;gt;k;
    
    for(int i=1;i&amp;lt;=n;i++)
        cin&amp;gt;&amp;gt;w[i];
    memset(f,-0x3f,sizeof f);
    for(int i=0;i&amp;lt;=n;i++) f[i][0][0]=0;
    for(int i=1;i&amp;lt;=n;i++)
        for(int j=1;j&amp;lt;=k;j++)
        {
            f[i][j][0]=max(f[i-1][j][0],f[i-1][j][1]+w[i]);
            f[i][j][1]=max(f[i-1][j][1],f[i-1][j-1][0]-w[i]);
        }
    int res=0;
    for(int i=0;i&amp;lt;=k;i++)
        res=max(res,f[n][i][0]);
    cout&amp;lt;&amp;lt;res&amp;lt;&amp;lt;endl;
    return 0;
}

acwing1058

#include &amp;lt;cstring&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;algorithm&amp;gt;
using namespace std;
const int N = 100010, INF = 0x3f3f3f3f;

int n;
int w[N];
int f[N][3];

int main()
{
    scanf(&amp;quot;%d&amp;quot;, &amp;amp;n);

    for (int i = 1; i &amp;lt;= n; i ++ ) scanf(&amp;quot;%d&amp;quot;, &amp;amp;w[i]);

    f[0][0] = f[0][1] = -INF, f[0][2] = 0;
    for (int i = 1; i &amp;lt;= n; i ++ )
    {
        f[i][0] = max(f[i - 1][0], f[i - 1][2] - w[i]);
        f[i][1] = f[i - 1][0] + w[i];
        f[i][2] = max(f[i - 1][2], f[i - 1][1]);
    }

    printf(&amp;quot;%d\n&amp;quot;, max(f[n][1], f[n][2]));

    return 0;
}

poj3401
æœ€è¿‘ï¼Œlxhgwwæ²‰è¿·äºè‚¡ç¥¨ï¼Œç»è¿‡å‡ å¤©çš„ç ”ç©¶ï¼Œä»–å‘ç°äº†ä¸€äº›è§„å¾‹çš„æ¨¡å¼ã€‚
ä»–é¢„æµ‹æœªæ¥Tå¤©çš„è‚¡ç¥¨å¸‚åœºã€‚ åœ¨ç¬¬iå¤©ï¼Œæ‚¨å¯ä»¥ä»¥APiçš„ä»·æ ¼è´­ä¹°ä¸€åªè‚¡ç¥¨æˆ–å–å‡ºä¸€åªè‚¡ç¥¨ä»¥è·å¾—BPiã€‚
è¿˜æœ‰å…¶ä»–ä¸€äº›é™åˆ¶ï¼Œå³åœ¨ç¬¬ä¸€å¤©å°±å¯ä»¥è´­ä¹°æœ€å¤šASiè‚¡ç¥¨ï¼Œæœ€å¤šå¯ä»¥å–å‡ºBSiè‚¡ç¥¨ã€‚ä¸¤ä¸ªäº¤æ˜“æ—¥çš„é—´éš”åº”å¤§äºWå¤©ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾æ‚¨åœ¨ç¬¬iå¤©è¿›è¡Œäº†äº¤æ˜“ï¼ˆä»»ä½•ä¹°å–è‚¡ç¥¨éƒ½è¢«è§†ä¸ºä¸€é¡¹äº¤æ˜“ï¼‰ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªäº¤æ˜“æ—¥å¿…é¡»åœ¨ç¬¬ï¼ˆi + W + 1ï¼‰å¤©æˆ–æ›´æ™šçš„æ—¶é—´è¿›è¡Œã€‚è€Œä¸”ï¼Œä»»ä½•æ—¶å€™æœ€å¤šåªèƒ½æ‹¥æœ‰MaxPè‚¡ç¥¨ã€‚
åœ¨ç¬¬ä¸€å¤©ä¹‹å‰ï¼Œlxhgwwå·²ç»æ‹¥æœ‰æ— é™çš„èµ„é‡‘ï¼Œä½†æ˜¯æ²¡æœ‰è‚¡ç¥¨ï¼Œå½“ç„¶ï¼Œä»–å¸Œæœ›ä»è‚¡å¸‚ä¸­èµšåˆ°å°½å¯èƒ½å¤šçš„é’±ã€‚ æ‰€ä»¥é—®é¢˜æ¥äº†ï¼Œä»–æœ€å¤šåªèƒ½èµšå¤šå°‘é’±ï¼Ÿ







åŠ¨æ€è§„åˆ’æ–¹ç¨‹ï¼š
1.ä¸ä¹°ä¸å–ã€‚dp[i][j]=max(dp[i-1][j],dp[i][j]);
2.ä¹°ä¸€äº›è‚¡ç¥¨ã€‚dp[i][j]=max(dp[i-1][k]-(j-k)*ap[i]);(0&amp;lt;=k&amp;lt;=j&amp;lt;=Maxp)
3.å–ä¸€äº›è‚¡ç¥¨ã€‚dp[i][j]=max(dp[i-1][k]+(k-j)*bp[i]);(0&amp;lt;=j&amp;lt;=k&amp;lt;=Maxp)
æ³¨æ„ï¼š
1.æŠŠæ‰€æœ‰æœªå®šä¹‰çš„çŠ¶æ€éƒ½è®¾ç½®ä¸º-INFï¼Œ1~w+1å¤©å¾—åˆå§‹åŒ–ï¼Œå› ä¸ºè¿™äº›å¤©ä¸èƒ½æœ‰å‰é¢çš„çŠ¶æ€æ¨å‡ºæ¥ï¼Œåˆå§‹åŒ–ä¸ºå¯¹åº”è´­ä¹°å¤šå°‘è‚¡ç¥¨æ‰€å‡å»çš„é’±æ•°ï¼Œå› ä¸ºä¸€å¼€å§‹åªæœ‰ä¹°ï¼Œä¸èƒ½å–ã€‚
2.å¾ªç¯çš„é€’å‡è¿˜æ˜¯é€’å¢é—®é¢˜ï¼Œè·Ÿå½“å‰è¦è®¿é—®çš„çŠ¶æ€æœ‰å…³ã€‚
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace std;
const int N=2010;
int f[N][N];
int ap[N],bp[N];//ä¹°å…¥ä»·æ ¼ï¼Œå–å‡ºä»·æ ¼ 
int as[N],bs[N];//ä¹°å…¥é™åˆ¶ï¼Œå–å‡ºé™åˆ¶
int q[N];
int n,m,w;

int main()
{
    int T;
    cin&amp;gt;&amp;gt;T;
    while(T--)
    {
        scanf(&amp;quot;%d%d%d&amp;quot;,&amp;amp;n,&amp;amp;m,&amp;amp;w);
        for(int i=1;i&amp;lt;=n;i++)
            scanf(&amp;quot;%d%d%d%d&amp;quot;,&amp;amp;ap[i],&amp;amp;bp[i],&amp;amp;as[i],&amp;amp;bs[i]);
    
        memset(f,-0x3f,sizeof f);
        f[0][0]=0;
        for(int i=1;i&amp;lt;=w+1;i++)
            for(int j=0;j&amp;lt;=as[i];j++)
                f[i][j]=-j*ap[i];
        
        for(int i=1;i&amp;lt;=n;i++)
        {
            for(int j=0;j&amp;lt;=m;j++)
                f[i][j]=max(f[i][j],f[i-1][j]);//æ²¡æœ‰äº¤æ˜“
            if(i &amp;lt;= w+1) continue;
            int hh=0,tt=-1;
            for(int j=0;j&amp;lt;=m;j++)
            {
                if(hh &amp;lt;= tt &amp;amp;&amp;amp; j-as[i] &amp;gt; q[hh]) 
                    hh++;
                
                while(hh&amp;lt;=tt &amp;amp;&amp;amp; f[i-w-1][j]+j*ap[i] &amp;gt;= f[i-w-1][q[tt]]+q[tt]*ap[i])
                    tt--;
                q[++tt]=j;
                f[i][j]=max(f[i][j],f[i-w-1][q[hh]]+q[hh]*ap[i]-j*ap[i]);//ä¹°å…¥ 
             } 
             
            hh=0,tt=-1;
            for(int j=m;j&amp;gt;=0;j--)
            {
                if(hh &amp;lt;= tt &amp;amp;&amp;amp; j+bs[i] &amp;lt; q[hh]) 
                    hh++;
                
                while(hh&amp;lt;=tt &amp;amp;&amp;amp; f[i-w-1][j]+j*bp[i] &amp;gt;= f[i-w-1][q[tt]]+q[tt]*bp[i])
                    tt--;
                q[++tt]=j;
                f[i][j]=max(f[i][j],f[i-w-1][q[hh]]+q[hh]*bp[i]-j*bp[i]);//å–å‡º 
             } 
        }
        printf(&amp;quot;%d\n&amp;quot;,f[n][0]);
    }
    return 0;
 } 


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://caifxh.github.io/post/zhuang-tai-ji/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://caifxh.github.io/post/ou-la-lu-jing/">
                        æ¬§æ‹‰è·¯å¾„
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-04-04</time>
                    
                        <a href="https://caifxh.github.io/tag/Aq1uYaqZQ/" class="post-tag i-tag
                            i-tag-">
            #å›¾è®º
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            æ¬§æ‹‰è·¯
é€šè¿‡å›¾ï¼ˆæ— å‘å›¾æˆ–æœ‰å‘å›¾ï¼‰ä¸­æ‰€æœ‰è¾¹ä¸€æ¬¡ä¸”ä»…ä¸€æ¬¡è¡Œéå›¾ä¸­æ‰€æœ‰é¡¶ç‚¹çš„é€šè·¯ç§°ä¸ºæ¬§æ‹‰é€šè·¯ï¼Œé€šè¿‡å›¾ä¸­æ‰€æœ‰è¾¹ä¸€æ¬¡ä¸”ä»…ä¸€æ¬¡è¡Œéæ‰€æœ‰é¡¶ç‚¹çš„å›è·¯ç§°ä¸ºæ¬§æ‹‰å›è·¯ã€‚å…·æœ‰æ¬§æ‹‰å›è·¯çš„å›¾ç§°ä¸ºæ¬§æ‹‰å›¾ï¼ˆEuler Graphï¼‰ï¼Œå…·æœ‰æ¬§æ‹‰é€šè·¯è€Œæ— æ¬§æ‹‰å›è·¯çš„å›¾ç§°ä¸ºåŠæ¬§æ‹‰å›¾ã€‚




(æ³¨æ„ï¼šè¿™é‡Œè¯´æœ‰å‘å›¾è¿é€šï¼Œè¯´çš„æ˜¯æœ‰å‘å›¾æ˜¯å¼±è¿é€šå›¾ã€‚å³æŠŠæœ‰å‘å›¾ä¸­çš„è¾¹å˜æˆæ— å‘è¾¹ï¼Œåªè¦è¯¥å›¾è¿é€šï¼Œé‚£ä¹ˆåŸæœ‰å‘å›¾å³æ˜¯å¼±è¿é€šå›¾ã€‚å®é™…ä¸­å¯ç”¨å¹¶æŸ¥é›†åˆ¤æ–­æ˜¯å¦å¼±è¿é€š)



â€¢ æ¬§æ‹‰å›è·¯çš„æ±‚è§£æ–¹æ³•ä¸»è¦æœ‰ä¸¤ç§ï¼š

DFSæœç´¢
Fleuryç®—æ³•

ç”¨ DFS æœç´¢æ€æƒ³æ±‚è§£æ¬§æ‹‰å›è·¯çš„æ€è·¯ä¸ºï¼š

åˆ©ç”¨æ¬§æ‹‰å®šç†åˆ¤æ–­å‡ºä¸€ä¸ªå›¾å­˜åœ¨æ¬§æ‹‰é€šè·¯æˆ–æ¬§æ‹‰å›è·¯ã€‚
é€‰æ‹©ä¸€ä¸ªæ­£ç¡®çš„èµ·å§‹é¡¶ç‚¹ï¼Œç”¨ DFS ç®—æ³•éå†æ‰€æœ‰çš„è¾¹ï¼ˆæ¯æ¡è¾¹
åªéå†ä¸€æ¬¡ï¼‰ï¼Œé‡åˆ°èµ°ä¸é€šå°±å›é€€ã€‚ â€¢ åœ¨æœç´¢å‰è¿›æ–¹å‘ä¸Šå°†éå†è¿‡çš„è¾¹æŒ‰é¡ºåºè®°å½•ä¸‹æ¥ã€‚
è¿™ç»„è¾¹çš„æ’åˆ—å°±ç»„æˆäº†ä¸€æ¡æ¬§æ‹‰é€šè·¯æˆ–æ¬§æ‹‰å›è·¯ã€‚

ä¾‹é¢˜
ç»™å®š n å¼ éª¨ç‰Œï¼Œæ¯å¼ éª¨ç‰Œæœ‰å·¦å³ä¸¤ä¸ªç‚¹æ•°ï¼ˆä» 1 åˆ° 6ï¼‰ã€‚é—®èƒ½ä¸èƒ½
é€šè¿‡äº¤æ¢éª¨ç‰Œçš„é¡ºåºå’Œäº¤æ¢å·¦å³ä¸¤ä¸ªç‚¹æ•°ï¼Œä½¿å¾—ä»»æ„ä¸¤ä¸ªç›¸é‚»éª¨ç‰Œçš„
ç›¸é‚»æ®µä¸ºç›¸ç­‰çš„æ•°å­—ã€‚
åŸå§‹ï¼š (1 2)(2 4)(2 4)(6 4)(2 1)
é‡æ’åï¼š (4 2)(2 1)(1 2)(2 4)(4 6)
æœ¬é¢˜å¯ä»¥è½¬åŒ–æˆæ¬§æ‹‰å›è·¯æˆ–æ¬§æ‹‰é€šè·¯çš„æ±‚è§£é—®é¢˜ã€‚

é¦–å…ˆè¦æ„é€ ä¸€ä¸ªå›¾ï¼Ÿ
æ¯å¼ éª¨ç‰Œå½“ä¸€ä¸ªç‚¹ï¼Ÿ
å¦‚ä½•è§£å†³äº¤æ¢éª¨ç‰Œå†…éƒ¨ä¸¤ä¸ªç‚¹æ•°ï¼Ÿ

å›¾å»ºå¥½ä¹‹åï¼Œå…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨æ¬§æ‹‰é€šè·¯æˆ–æ¬§æ‹‰å›è·¯ã€‚
æ€»ç»“ï¼šå­˜åœ¨ â” é€‰æ‹©æ­£ç¡®çš„èµ·ç‚¹ â” 6 â” å¼€å§‹ DFS
acwing1123
æˆ‘ä»¬å°†è¿™ä¸ªå›¾çœ‹æˆæœ‰å‘å›¾ï¼Œå¯¹äºæ¯è¾“å…¥ä¸€ç»„æ•°æ®åŠ ä¸¤æ¡æœ‰å‘è¾¹ï¼Œéœ€è¦æ¯æ¡è¾¹éƒ½è‡³å°‘èµ°ä¸€é
æˆ‘ä»¬å…ˆå›æƒ³ä¸€ä¸‹å­˜åœ¨æœ‰å‘å›¾çš„æ¬§æ‹‰è·¯å¾„çš„å……åˆ†å¿…è¦æ¡ä»¶

æ‰€æœ‰ç‚¹çš„å…¥åº¦éƒ½ç­‰äºå‡ºåº¦
é™¤äº†ä¸¤ä¸ªç‚¹ä»¥å¤–çš„ç‚¹å…¥åº¦ç­‰äºå‡ºåº¦ï¼Œ

è¿™ä¸¤ä¸ªç‚¹ä¸€ä¸ª å…¥åº¦ = å‡ºåº¦ + 1ï¼Œå¦ä¸€ä¸ª å…¥åº¦ = å‡ºåº¦ - 1
å› æ­¤ï¼Œæˆ‘ä»¬è€ƒè™‘æ¯åŠ ä¸€æ¡è¾¹ï¼Œæ¯ä¸ªç‚¹çš„å…¥åº¦å’Œå‡ºåº¦éƒ½åŠ 1
æ‰€ä»¥ï¼Œæ¯ä¸ªç‚¹çš„å…¥åº¦éƒ½ä¸€å®šç­‰äºå‡ºåº¦,ç¬¦åˆä¸Šè¿°çš„ç¬¬ä¸€æ¡
æ•…è¿™ä¸ªå›¾å­˜åœ¨æ¬§æ‹‰è·¯å¾„ï¼Œå¹¶ä¸”å¯ä»¥é€‰ä»»æ„ç‚¹ä¸ºèµ·ç‚¹
æ‰€ä»¥æˆ‘ä»¬åªéœ€ç»Ÿè®¡æ‰€æœ‰çš„è¾¹çš„é•¿åº¦æ€»å’Œï¼Œè·Ÿæ®20km/h ç®—å‡ºæ—¶é—´å³å¯
#include &amp;lt;cstring&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;algorithm&amp;gt;
#include &amp;lt;cmath&amp;gt;

using namespace std;

int main()
{
    double x1, y1, x2, y2;
    cin &amp;gt;&amp;gt; x1 &amp;gt;&amp;gt; y1;

    double sum = 0;
    while (cin &amp;gt;&amp;gt; x1 &amp;gt;&amp;gt; y1 &amp;gt;&amp;gt; x2 &amp;gt;&amp;gt; y2)
    {
        double dx = x1 - x2;
        double dy = y1 - y2;
        sum += sqrt(dx * dx + dy * dy) * 2;
    }

    int minutes = round(sum / 1000 / 20 * 60);
    int hours = minutes / 60;
    minutes %= 60;

    printf(&amp;quot;%d:%02d\n&amp;quot;, hours, minutes);

    return 0;
}

acwing1124
æ— å‘å›¾çš„æ¬§æ‹‰è·¯å¾„&amp;amp;æ¬§æ‹‰å›è·¯è£¸é¢˜
#include&amp;lt;iostream&amp;gt;
using namespace std;
const int N=510;
int n=500,m;
int g[N][N];
int ans[1100];
int cnt;
int d[N];

void dfs(int u)
{
    for(int i=1;i&amp;lt;=n;i++)//ä»å°åˆ°å¤§æšä¸¾ï¼Œå­—å…¸åºæœ€å°
    {
        if(g[u][i])
        {
            g[u][i]--,g[i][u]--;
            dfs(i);
        }
    }
    
    ans[cnt++]=u;
}

int main()
{
    cin&amp;gt;&amp;gt;m;
    
    int l=500,r=1;
    while(m--)
    {
        int a,b;
        cin&amp;gt;&amp;gt;a&amp;gt;&amp;gt;b;
        l=min(l,min(a,b));
        r=max(r,max(a,b));
        g[a][b]++,g[b][a]++;
        d[a]++,d[b]++;
    }
    
    int start=l;
    for(int i=l;i&amp;lt;=r;i++)
    {
        if(d[i] % 2)
        {
            start=i;
            break;
        }
    }
    
    dfs(start);//æ¬§æ‹‰å›è·¯ä»å“ªå¼€å§‹éƒ½å¯ä»¥æœï¼Œæ¬§æ‹‰è·¯è¦ä»å¥‡ç‚¹å¼€å§‹
    
    for(int i=cnt-1;i&amp;gt;=0;i--)//é€†åºè¾“å‡º
        printf(&amp;quot;%d\n&amp;quot;,ans[i]);
    return 0;
}

acwing1185
æœ‰å‘å›¾ï¼Œé¦–å°¾è¿å•è¯ï¼Œå¯ç”¨DFSå’Œå¹¶æŸ¥é›†åˆ¤æ–­è¿é€šæ€§
#include &amp;lt;cstdio&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;cstring&amp;gt;
using namespace std;
const int N = 26, L = 1005;
int n, cnt, g[N][N], in[N], out[N];
char s[L];

void dfs(int u) {
    for (int i = 0; i &amp;lt; 26; i++) {
        if(g[u][i]) {
            cnt++;
            g[u][i] --;
            dfs(i);
        }
    }
}
int main() {
    int T; scanf(&amp;quot;%d&amp;quot;, &amp;amp;T);
    while(T--) {
        cnt = 0;
        memset(g, 0, sizeof g);
        memset(in, 0, sizeof in);
        memset(out, 0, sizeof out);
        scanf(&amp;quot;%d&amp;quot;, &amp;amp;n);
        for (int i = 0; i &amp;lt; n; i++) {
            scanf(&amp;quot;%s&amp;quot;, s);
            int u = s[0] - &#39;a&#39;, v = s[strlen(s) - 1] - &#39;a&#39;;
            g[u][v]++;
            out[u]++, in[v]++;
        }

        bool ok = true;
        int s = 0, t = 0;
        for (int i = 0; i &amp;lt; 26; i++) {
            if(in[i] != out[i]) {
                if(in[i] == out[i] + 1) t ++;
                else if(in[i] + 1 == out[i]) s++;
                else { ok = false; break; }
            }
        }


        if(!(!s &amp;amp;&amp;amp; !t || (s == 1 &amp;amp;&amp;amp; t == 1))) ok = false;

        s = 0;
        while(!out[s]) s++;
        for (int i = 0; i &amp;lt; 26; i++)
            if(in[i] + 1 == out[i]) { s = i; break; }

        dfs(s);

        if(cnt &amp;lt; n) ok = false;
        puts(ok ? &amp;quot;Ordering is possible.&amp;quot; : &amp;quot;The door cannot be opened.&amp;quot;);
    }
    return 0;
}

#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
using namespace std;
const int N=30;
int n;
int din[N], dout[N], p[N];
bool st[N];


int find(int x)
{
    if (p[x] != x) p[x] = find(p[x]);
    return p[x];
}

int main()
{
    int t;
    scanf(&amp;quot;%d&amp;quot;,&amp;amp;t);
    while(t--)
    {
        scanf(&amp;quot;%d&amp;quot;,&amp;amp;n);
        memset(din,0,sizeof din);
        memset(dout,0,sizeof dout);
        memset(st,0,sizeof st);
        for(int i=0;i&amp;lt;26;i++)
            p[i]=i;
        
        for(int i=0;i&amp;lt;n;i++)
        {
            char str[1010];
            scanf(&amp;quot;%s&amp;quot;,str);
            int len=strlen(str);
            int a=str[0]-&#39;a&#39;,b=str[len-1]-&#39;a&#39;;
            st[a]=st[b]=true;
            dout[a]++,din[b]++;
            p[find(a)]=find(b);
        }
        
        int start=0,end=0;
        bool success=true;
        for(int i=0;i&amp;lt;26;i++)
            if(din[i] != dout[i])
            {
                if(din[i] == dout[i] + 1)
                    end++;
                else if(din[i] + 1 == dout[i])
                    start++;
                else
                {
                    success=false;
                    break;
                }
            }
            
        if(!(!start &amp;amp;&amp;amp; !end ||start == 1 &amp;amp;&amp;amp; end == 1))
            success=false;
        int rep = -1;
        for (int i = 0; i &amp;lt; 26; i ++ )
            if (st[i])
            {
                if (rep == -1) rep = find(i);
                else if (rep != find(i))
                {
                    success = false;
                    break;
                }
            }

        if (success) puts(&amp;quot;Ordering is possible.&amp;quot;);
        else puts(&amp;quot;The door cannot be opened.&amp;quot;);

    }
    return 0;
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://caifxh.github.io/post/ou-la-lu-jing/">Read More ~</a>
                            </div>
                </div>
            </article>
            
            <article class="post i-card">
                <h2 class="post-title">
                    <a href="https://caifxh.github.io/post/kuo-zhan-kmp/">
                        æ‰©å±•KMP
                    </a>
                </h2>
                <div class="post-info">
                    <time class="post-time">2020-04-03</time>
                    
                        <a href="https://caifxh.github.io/tag/yImqvC-Dp/" class="post-tag i-tag
                            i-tag-banana">
            #å­—ç¬¦ä¸²
        </a>
                        
                </div>
                <div class="post-article">
                    
                            <div class="post-content">
                                
                                        <div class="post-content-content">
                                            Zç®—æ³•




r[5] = 7
r[6] = 7
l[5] = 5
l[6] = 5

å¯¹äº Z[2] æˆ‘ä»¬éœ€è¦æš´åŠ›è®¡ç®—ã€‚
ä¹Ÿå°±æ˜¯æš´åŠ›è®¡ç®— S[1..|S|] å’Œ S[2..|S|] çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚
å¦‚æœ Z[2] &amp;gt; 0, é‚£ä¹ˆ r = r[2], l = l[2] = 2
å¦‚æœ Z[2] = 0, é‚£ä¹ˆ r = r[2] = 0, l = l[2] = 0
æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯ç”¨å·²æœ‰çš„ Z[2], Z[3], ..., Z[k-1]ï¼Œæ¥æ¨
å‡º Z[k].
å‡è®¾ k = 121, Z[2..120] å·²ç»çŸ¥é“äº†
r[120] = 130, l[120] = 100

åˆ’åˆ†æˆ[l,i-1],[i,r]





è“è‰²éƒ¨åˆ†ä¸€å®šä¸ç›¸ç­‰ï¼Œå¦åˆ™è¯´æ˜z-boxå¯ä»¥å³ç§»
ç¬¬ä¸€æ­¥ï¼š
åˆå§‹åŒ– Z[]ï¼Œæš´åŠ›è®¡ç®— Z[2]
for(int i = 1;i &amp;lt;= n;i ++) z[i] = 0;
int l, r;
while(str[1 + z[2]] == str[2 + z[2]]) z[2] ++; 
l = 2, r = 2+ z[2]-1;

ç¬¬äºŒæ­¥ï¼š
æšä¸¾ iï¼Œåˆ†ä¸‰ç§æƒ…å†µä¾æ¬¡è®¡ç®— Z[i]
for(int i = 3;i &amp;lt;= n;i ++)
{
    if(i &amp;gt; r)
    {
        while(str[1 + z[i]] == str[i + z[i]]) z[i] ++;
        l = i, r = i + z[i] - 1;
    }
    else
    {
        if(z[i - l + 1] &amp;lt; r - i + 1) z[i] = z[i - l + 1];
        else
        {
            z[i] = r - i;
            while(str[1 + z[i]] == str[i + z[i]]) z[i] ++; 
            l = i, r = i + z[i] - 1; 
        }
    } 
}

æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) çš„
æ‰©å±•KMP
ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² S å’Œ Tï¼ˆé•¿åº¦åˆ†åˆ«ä¸º n å’Œ mï¼‰
å®šä¹‰ extend[i] ä¸º S[i..n] ä¸ T çš„æœ€é•¿å…¬å…±å‰ç¼€çš„é•¿åº¦ã€‚
æ±‚å‡º extend æ•°ç»„

å¦‚æœ S = Tï¼Œé‚£ä¹ˆ extend æ•°ç»„å°±æ˜¯ Z æ•°ç»„ã€‚

å‡è®¾ç°åœ¨éå†åˆ°äº† S[i]ï¼Œä¸” S[1], S[2],â€¦, S[i-1]éƒ½å·²ç»ç®—å‡º
ä¸ Z ç®—æ³•ç±»ä¼¼ï¼Œè®¾ç½®ä¸¤ä¸ªå˜é‡ l å’Œ rï¼Œr è¡¨ç¤ºèƒ½å’Œ T åŒ¹
é…åˆ°çš„æœ€å³è¾¹çš„ä½ç½®ï¼Œl ä¸º r å¯¹åº”çš„èµ·å§‹ä½ç½®ã€‚
ä¹Ÿå°±æ˜¯ S[l .. r] = T[1.. r-l+1]

S[i] å¯¹åº”çš„æ˜¯ T[i-l+1]
ç°åœ¨è¦è®¡ç®—çš„æ˜¯ S[i..n] ä¸ T çš„æœ€é•¿å…¬å…±å‰ç¼€
æ³¨æ„åˆ°æ­¤æ—¶ S[i..r] = T[i-l+1 .. r-l+1]
æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆå¯¹ T æ±‚ä¸€é Z æ•°ç»„ï¼Œç„¶åè€ƒå¯Ÿä¸€ä¸‹ Z[i-l+1]



void calc_Z(char *str) 
{
	int n = strlen(str + 1);
	for(int i = 1; i &amp;lt;= n; i ++) z[i] = 0;
	z[1] = n;
	int l, r = 0;
	for(int i = 2; i &amp;lt;= n; i ++) 
	{
		if(i &amp;gt; r) 
		{
			while(str[1 + z[i]] == str[i + z[i]]) z[i] ++;
			l = i, r = i + z[i] - 1;
		} else 
		{
			if(z[i - l + 1] &amp;lt; r - i + 1) z[i] = z[i - l + 1];
			else 
			{
				z[i] = r - i + 1;
				while(str[1 + z[i]] == str[i + z[i]]) z[i] ++;
				l = i, r = i + z[i] - 1;
			}
		}
	}
}

void calc_extend(char *S, char *T) 
{
	calc_Z(T);
	int l, r = 0;
	int n = strlen(S + 1);
	int m = strlen(T + 1);
	for (int i = 1; i &amp;lt;= n; i ++) 
	{
		if (i &amp;gt; r) 
		{
			while (i + ext[i] &amp;lt;= n &amp;amp;&amp;amp; 1 + ext[i] &amp;lt;= m &amp;amp;&amp;amp;
			        S[i + ext[i]] == T[1 + ext[i]]) ext[i] ++;
			l = i, r = i + ext[i] - 1;
		}
		else 
		{
			if (i + z[i - l + 1] - 1 &amp;lt; r) ext[i] = z[i - l + 1];
			else 
			{
				ext[i] = r - i + 1;
				while (i + ext[i] &amp;lt;= n &amp;amp;&amp;amp; 1 + ext[i] &amp;lt;= m &amp;amp;&amp;amp; S[i +ext[i]] == T[1 + ext[i]]) 
					ext[i] ++;
				l = i, r = i + ext[i] - 1;
			}
		}
	}
}

ä¾‹é¢˜
é¢˜æ„ï¼šç»™ä½ nä¸ªå­—ç¬¦ä¸²ï¼Œæ±‚è¿™nä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­ä¸²
hdu4333
ç»™ä¸€ä¸ª L ä½æ•°çš„æ­£æ•´æ•° Nï¼Œæ¯æ¬¡å¯ä»¥æŠŠè¿™ä¸ªæ•°çš„æœ€åä¸€ä½ç§»åˆ°æœ€å‰é¢æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„æ•°ã€‚
æ€»å…±æœ€å¤šå¯ä»¥å¾—åˆ° n ä¸ªæ•°ï¼Œé‡å¤çš„åªç®—ä¸€æ¬¡ã€‚
é—®è¿™äº›æ•°ä¸­ï¼Œç­‰äº n çš„ï¼Œå°äº nçš„ï¼Œå¤§äº n çš„æ•°åˆ†åˆ«æœ‰å‡ ä¸ªã€‚
L â‰¤ 1e5

æ ·ä¾‹ï¼š
341 ï¼ˆç­”æ¡ˆï¼š 1 1 1ï¼‰
æˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸ªæ•°å¤åˆ¶ä¸¤éï¼Œç„¶ååªè€ƒè™‘é•¿åº¦ä¸º n çš„å­ä¸²ã€‚è¿™äº›å­ä¸²å°±æ˜¯ç§»åŠ¨è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°ã€‚
å¦‚ä½•å’ŒåŸæ•° N åšæ¯”è¾ƒå‘¢
å‡è®¾ç°åœ¨çš„æ•°æ˜¯ S[i .. i+L-1], N æ˜¯ S[1..L]
æˆ‘ä»¬åªè¦æ±‚å‡ºä»–ä»¬çš„æœ€é•¿å…¬å…±å‰ç¼€ xï¼Œå¦‚æœ x = n è¯´æ˜è¿™ä¸¤ä¸ªæ•°ç›¸ç­‰ã€‚
å¦åˆ™ï¼Œæ¯”è¾ƒ S[x] å’Œ S[i+x-1] çš„å¤§å°ï¼Œå°±å¯ä»¥ç¡®å®šä»–ä»¬çš„å¤§å°å…³ç³»ã€‚
æ±‚ x ï¼Œå°±æ˜¯æ‰©å±• KMP ä¸­çš„ Z ç®—æ³•ã€‚x = min(n, Z[i])
æœ€åä¸€æ­¥å»é‡ã€‚å¯¹ N è·‘ä¸€æ¬¡ KMP
å¦‚æœ L-next[L] æ˜¯ L çš„çº¦æ•°ï¼Œé‚£ä¹ˆ L-next[L] æ˜¯ N çš„æœ€å°å¾ªç¯èŠ‚ã€‚å¦åˆ™ N çš„ æœ€å°å¾ªç¯èŠ‚æ˜¯ Lã€‚
å¯¹å¾ªç¯èŠ‚å†…çš„æƒ…å†µæšä¸¾ä¸€éå³å¯,æˆ–é™¤ä»¥æœ€å°å¾ªç¯èŠ‚ä¸ªæ•°ã€‚
æ—¶é—´å¤æ‚åº¦ O(L)
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstdio&amp;gt;
using namespace std;
const int N=200010;
char str[N];
int ne[N];
int z[N];

int main()
{
    int T;
    scanf(&amp;quot;%d&amp;quot;,&amp;amp;T);
    for(int kas=1;kas&amp;lt;=T;kas++)
    {
        scanf(&amp;quot;%s&amp;quot;,str+1);
        
        int len=strlen(str+1);
        for(int i=2,j=0;i&amp;lt;=len;i++)
        {
            while(j &amp;amp;&amp;amp; str[i] != str[j+1])
                j=ne[j];
            if(str[i] == str[j+1])
                j++;
            ne[i]=j;
        }
        
        for(int i=1;i&amp;lt;=len;i++)
            str[i+len]=str[i];
        str[len*2+1]=&#39;\0&#39;;
        memset(z,0,sizeof z);
        z[1]=len*2;
        int l,r=0;
        
        for(int i=2;i&amp;lt;=len*2;i++)
        {
            if(i&amp;gt;r)
            {
                while(str[1+z[i]] == str[i+z[i]])
                    z[i]++;
                l=i,r=i+z[i]-1;
            }
            else 
            {
                if(z[i-l+1] &amp;lt; r-i+1)
                    z[i]=z[i-l+1];
                else 
                {
                    z[i]=r-i;
                    while(str[1+z[i]] == str[i+z[i]])
                        z[i]++;
                    l=i,r=i+z[i]-1;
                }
            }
        }
        
        int gre=0,eql=0,les=0;
        for(int i=1;i&amp;lt;=len;i++)
        {
            if(z[i] &amp;gt;= len)
                eql++;
            else if(str[1+z[i]] &amp;gt; str[i+z[i]])
                les++;
            else gre++;
        }
        
        int t;
        if(len%(len-ne[len]) == 0)
            t=len/(len-ne[len]);//å¾ªç¯èŠ‚ä¸ªæ•° 
        else 
            t=1;
        printf(&amp;quot;Case %d: %d %d %d\n&amp;quot;,kas,les/t,eql/t,gre/t);
    }
}

å¯¹å¾ªç¯èŠ‚å†…çš„æƒ…å†µæšä¸¾ä»£ç 
poj3376
ç»™ä½  n ä¸ªå­—ç¬¦ä¸² m[1], m[2], â€¦, m[n]ã€‚ æ±‚ S = m[i]m[j] ï¼ˆ1 &amp;lt;= i,j &amp;lt;= nï¼‰æ˜¯å›æ–‡ä¸²çš„æ•°é‡ã€‚
n ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¹‹å’Œä¸è¶…è¿‡ 2Â·1e6

æ ·ä¾‹è¾“å…¥ï¼š
3a
ab
ba
ç­”æ¡ˆï¼š5ï¼ˆaa,aba,aba,abba,baab)
è€ƒè™‘ä»€ä¹ˆæƒ…å†µä¸‹ i å’Œ j æ‹¼èµ·æ¥ä¼šæ˜¯å›æ–‡ä¸²ã€‚


içš„é•¿åº¦å°äºjï¼Œé‚£ä¹ˆiä¸€å®šæ˜¯jçš„åä¸²çš„å‰ç¼€ï¼Œä¸”jçš„åä¸²å‰©ä¸‹çš„åç¼€æ˜¯å›æ–‡ä¸²


içš„é•¿åº¦ç­‰äºjï¼Œé‚£ä¹ˆiç­‰äºjçš„åä¸²


içš„é•¿åº¦å¤§äºjï¼Œé‚£ä¹ˆjçš„åä¸²ä¸€å®šæ˜¯içš„å‰ç¼€ï¼Œä¸”iä¸²å‰©ä¸‹çš„åç¼€æ˜¯å›æ–‡ä¸²


æˆ‘ä»¬å¯ä»¥å°†è¿™nä¸ªå­—ç¬¦ä¸²æ’å…¥trieï¼Œæ¯ä¸ªèŠ‚ç‚¹è¦ç»´æŠ¤ä¸¤ä¸ªå€¼ï¼š
value1. åˆ°å½“å‰èŠ‚ç‚¹çš„å­—ç¬¦ä¸²ä¸ªæ•°ï¼›value2.å½“å‰èŠ‚ç‚¹åé¢çš„å›æ–‡å­ä¸²ä¸ªæ•°
æˆ‘ä»¬ç”¨æ¯ä¸ªå­—ç¬¦ä¸²çš„åä¸²å»trieä¸ŠæŸ¥æ‰¾ï¼Œè¦æ„æˆå›æ–‡ä¸²æœ‰ä»¥ä¸‹æƒ…å†µï¼š


1.æ­¤åä¸²æ˜¯å…¶ä»–ä¸²çš„å‰ç¼€ï¼Œé‚£ä¹ˆç»„åˆå›æ–‡ä¸²çš„æ•°é‡å°±è¦åŠ ä¸Švalue2


2.æ­¤åä¸²çš„å‰ç¼€æ˜¯æŸäº›å­—ç¬¦ä¸²ï¼Œä¸”åä¸²å‰©ä¸‹çš„åç¼€æ˜¯å›æ–‡ä¸²ï¼Œé‚£ä¹ˆç»„åˆå›æ–‡ä¸²çš„æ•°é‡è¦åŠ ä¸Švalue1


3.2çš„ç‰¹ä¾‹ï¼šæ­¤åä¸²çš„å‰ç¼€æ˜¯æŸäº›å­—ç¬¦ä¸²ï¼Œä¸”åä¸²å‰©ä¸‹çš„åç¼€ä¸ºç©ºï¼ŒåŒæ ·è¦åŠ ä¸Švalue1ï¼Œè¿™ç§æƒ…å†µå¯ä»¥å’Œ2ä¸€èµ·å¤„ç†


ç•™ä¸‹çš„é—®é¢˜å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰åç¼€ä¸­ï¼Œå“ªäº›æ˜¯å›æ–‡ä¸²ã€‚
å¯¹äºä¸² Sï¼Œæˆ‘ä»¬å…ˆæ±‚å‡ºæ­£ä¸² S å¯¹åä¸² T çš„ extend[i]
é‚£ä¹ˆå¯¹äºæ¯ä¸ª iï¼Œå¦‚æœ S[i..n] å’Œ T çš„æœ€é•¿å…¬å…±å‰ç¼€ç­‰äº
S[i..n] çš„é•¿åº¦ï¼Œè¯´æ˜ S[i..n] æ˜¯ä¸€ä¸ªå›æ–‡ä¸²ã€‚
å› æ­¤æ•´é“é¢˜å°±åœ¨çº¿æ€§çš„æ—¶é—´å¤æ‚åº¦å†…è§£å†³äº†ã€‚
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#include&amp;lt;cstdio&amp;gt;
using namespace std;
const int N=2e6+10;
int trie[N][26],tot=1;
int n;
char s[N],t[N];
int len[N];
int slen;
int z[N],ext[N];
bool flag[2][N];
int bg[N],ed[N];
typedef long long LL;
struct Node
{
	int v1,v2;
}cnt[N];

void get_z(char *s)
{
	int n=strlen(s+1);
	for(int i=1;i&amp;lt;=n;i++) z[i]=0;
	z[1]=n;
	int l,r=0;
	for(int i=2;i&amp;lt;=n;i++)
	{
		if(i&amp;gt;r)
		{
			while(s[1+z[i]] == s[i+z[i]])
				z[i]++;
			l=i,r=i+z[i]-1;
		}
		else
		{
			if(z[i-l+1] &amp;lt; r-i+1)
				z[i]=z[i-l+1];
			else
			{
				z[i]=r-i;
				while(s[1+z[i]] == s[i+z[i]])
					z[i]++;
				l=i,r=i+z[i]-1;
			}
		}
	}
}

void exkmp(int type,char *s,char *t)
{
	get_z(t);
	int n=strlen(s+1);
	int m=strlen(t+1);
	for(int i=1;i&amp;lt;=n;i++)
		ext[i]=0;
	int l,r=0;
	for(int i=1;i&amp;lt;=n;i++)
	{
		if(i&amp;gt;r)
		{
			while(i+ext[i] &amp;lt;=n &amp;amp;&amp;amp; 1+ext[i] &amp;lt;=m &amp;amp;&amp;amp;
			s[i+ext[i]] == t[1+ext[i]])
				ext[i]++;
			l=i,r=i+ext[i]-1;
		}
		else
		{
			if(z[i-l+1] &amp;lt; r-i+1)
				ext[i]=z[i-l+1];
			else
			{
				ext[i]=r-i+1;
				while(i + ext[i] &amp;lt;= n &amp;amp;&amp;amp; 1 + ext[i] &amp;lt;= m &amp;amp;&amp;amp; 
				s[i+ext[i]] == t[1+ext[i]])
					ext[i]++;
				l=i,r=i+ext[i]-1;
			}
		}
	}

	for(int i=1;i&amp;lt;=n;i++)
	{
		//cout&amp;lt;&amp;lt;&amp;quot;---&amp;quot;&amp;lt;&amp;lt;ext[i]&amp;lt;&amp;lt;endl;
		if(ext[i] == n-i+1)
			flag[type][i+slen]=true;//s[i...n]ä¸ºå›æ–‡ä¸²
	}
}

void insert(int k)
{
	int p=1;
	for(int i=bg[k];i&amp;lt;=ed[k];i++)
	{
		cnt[p].v2+=flag[0][i];
		int ch=s[i]-&#39;a&#39;;
		if(!trie[p][ch])
			trie[p][ch]=++tot;
		p=trie[p][ch];
	}
	cnt[p].v1++;
}

void print(int k)
{
	int p=1;
	for(int i=bg[k];i&amp;lt;=ed[k];i++)
	{
		int ch=s[i]-&#39;a&#39;;
		p=trie[p][ch];
		cout&amp;lt;&amp;lt;&amp;quot;---&amp;quot;&amp;lt;&amp;lt;cnt[p].v2&amp;lt;&amp;lt;&#39; &#39;&amp;lt;&amp;lt;cnt[p].v1&amp;lt;&amp;lt;endl;
	}
}

int main()
{
	scanf(&amp;quot;%d&amp;quot;,&amp;amp;n);
	
	for(int i=1;i&amp;lt;=n;i++)
	{
		scanf(&amp;quot;%d&amp;quot;,&amp;amp;len[i]);
		scanf(&amp;quot;%s&amp;quot;,s+1+slen);
		for(int j=1;j&amp;lt;=len[i];j++)
			t[slen+j]=s[slen+len[i]+1-j];
		t[slen+len[i]+1]=&#39;\0&#39;;
		exkmp(0,s+slen,t+slen);
		exkmp(1,t+slen,s+slen);

		bg[i]=slen+1;
		slen+=len[i];
		ed[i]=slen;

		insert(i);
		//print(i);
	}

	LL ans=0;
	for(int i=1;i&amp;lt;=n;i++)
	{
		int p=1;
		bool f=true;
		for(int j=ed[i];j&amp;gt;=bg[i];j--)//ç”¨åä¸²å»trieä¸ŠåŒ¹é…
		{
			int k=s[j]-&#39;a&#39;;
			if(!trie[p][k])
			{
				f=false;
				break;
			}
			else
				p=trie[p][k];
			if(flag[1][bg[i]+ed[i]-j+1] || j == bg[i])
				ans+=cnt[p].v1;
		}
		if(f)
			ans+=cnt[p].v2;
	}

	printf(&amp;quot;%lld\n&amp;quot;,ans);
	return 0;
}


                                        </div>
                                        
                                            <a class="btn btn-text" href="https://caifxh.github.io/post/kuo-zhan-kmp/">Read More ~</a>
                            </div>
                </div>
            </article>
            
                <!-- ç¿»é¡µ -->
                
    <div class="pagination-container">
        
                
                    <a href="https://caifxh.github.io/page/2" class="page-btn btn">ä¸‹ä¸€é¡µ</a>
                    
    </div>
    
                </div>
                <!--  -->
                <div class="main-container-middle"></div>
                <!--  -->
                <div id="sidebar" class="main-container-right">

                    <!-- ä¸ªäººä¿¡æ¯ -->
                    
    <div class="id_card i-card">
        <div class="id_card-avatar" style="background-image: url(https://caifxh.github.io/images/avatar.png?v=1586405129501)">
        </div>
        <h1 class="id_card-title">
            fxh
        </h1>
        <h2 class="id_card-description">
            èœ
        </h2>
        <!--  -->
        <div class="id_card-sns">
            <!-- github -->
            
                    <!-- twitter -->
                    
                            <!-- weibo -->
                            
                                    <!-- facebook -->
                                    

        </div>
    </div>
    

                        <!-- å…¬å‘Šæ  -->
                        

                </div>
            </div>



            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://caifxh.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
</body>

</html>